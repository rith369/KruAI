<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bac II Study Companion</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Bangers&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .bangers {
            font-family: 'Bangers', cursive;
            letter-spacing: 2px;
        }
        .app-container {
            max-width: 430px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.3);
        }
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .animate-slide-up {
            animation: slideUp 0.5s ease-out forwards;
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        .animate-bounce {
            animation: bounce 2s infinite;
        }
        .animate-pulse {
            animation: pulse 2s infinite;
        }
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .tab-bar {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            max-width: 430px;
            width: 100%;
            background: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 100;
        }
        .floating-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Translation data
        const translations = {
            en: {
                welcome: "Welcome to Your",
                bacStudy: "Bac II Study Journey",
                surveyIntro: "Let's personalize your path to success!",
                strengths: "What are your strengths?",
                weaknesses: "What are your weaknesses?",
                targetGrade: "What's your target grade?",
                monthsLeft: "Months until Bac II?",
                generateRoadmap: "Generate My Roadmap",
                home: "Home",
                lessons: "Lessons",
                donate: "Donate",
                chat: "Chat",
                profile: "Profile",
                daysLeft: "Days Until Bac II",
                currentStreak: "Day Streak",
                todayChallenge: "Today's Challenge",
                dailyPlan: "Today's Action Plan",
                yourRoadmap: "Your Personalized Roadmap",
                recommendedTime: "Recommended Study Time",
                hoursPerDay: "hours/day",
                basedOn: "Based on your goal & timeline",
                roadmapPhases: "Your Learning Phases",
                todaysPlan: "Complete today's tasks to earn 50 XP!",
                completedMsg: "Great work! Come back tomorrow for more!",
                math: "Math",
                biology: "Biology",
                basicLimits: "Basic Limits",
                basicProbability: "Basic Probability",
                humanBody: "Human Body",
                humanBrain: "Human Brain",
                importanceNote: "Importance for Exam",
                summary: "Summary",
                funFact: "Fun Fact",
                surpriseTip: "Surprise Tip",
                didYouKnow: "Did You Know?",
                quickChallenge: "Quick Challenge",
                earnXP: "Earn +20 XP",
                backToLessons: "Back to Lessons",
                donateTitle: "Support Education",
                donateSubtitle: "100% goes to scholarships for poor students",
                moneyDonation: "Money Donation",
                watchAds: "Watch Ads to Donate",
                topDonors: "Top Donors Leaderboard",
                thankYou: "Thank you for your support!",
                aiCoach: "AI Study Coach",
                askQuestion: "Ask me anything about your studies...",
                send: "Send",
                noInternet: "‚ö†Ô∏è No internet connection. Please try again later.",
                commonQuestions: "Common Questions",
                viewRoadmap: "View My Roadmap",
                studyNow: "Start Studying",
                motivationQuote: "Motivation of the Day",
                completeLesson: "Complete lesson",
                practice: "Practice exercises",
                reviewCards: "Review flashcards",
                dailyChallengeTask: "Daily challenge",
                chooseDepth: "Choose your study depth:",
                quickReview: "Quick Review (10 min)",
                standardStudy: "Standard Study (30 min)",
                deepDive: "Deep Dive (60 min)",
                chemistry: "Chemistry",
                physics: "Physics",
                history: "History",
                english: "English",
                flashcards: "Flashcards",
                practice: "Practice",
                leaderboard: "Leaderboard",
                progress: "Progress",
                mockExam: "Mock Exam",
                startFlashcards: "Start Flashcards",
                showAnswer: "Show Answer",
                nextCard: "Next Card",
                cardProgress: "Card Progress",
                correct: "Correct",
                incorrect: "Incorrect",
                startPractice: "Start Practice",
                checkAnswer: "Check Answer",
                nextQuestion: "Next Question",
                yourAnswer: "Your Answer",
                correctAnswer: "Correct Answer",
                explanation: "Explanation",
                practiceScore: "Practice Score",
                weakAreas: "Weak Areas",
                topStudents: "Top Students",
                yourRank: "Your Rank",
                progressOverview: "Progress Overview",
                topicsCompleted: "Topics Completed",
                totalXP: "Total XP",
                totalTime: "Study Time",
                weeklyProgress: "Weekly Progress",
                startMockExam: "Start Mock Exam",
                examInstructions: "Answer all questions to see your Bac II readiness score",
                submitExam: "Submit Exam",
                examScore: "Exam Score",
                retakeExam: "Retake Exam",
                bacReadiness: "Bac II Readiness"
            },
            km: {
                welcome: "·ûü·ûº·ûò·ûü·üí·ûú·û∂·ûÇ·ûò·ûì·üç·ûò·ûÄ·ûÄ·û∂·ûì·üã",
                bacStudy: "·ûÄ·û∂·ûö·ûí·üí·ûú·ûæ·ûä·üÜ·ûé·ûæ·ûö·ûü·û∑·ûÄ·üí·ûü·û∂ Bac II",
                surveyIntro: "·ûè·üÑ·üá·ûí·üí·ûú·ûæ·ûï·üí·ûõ·ûº·ûú·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ·û≤·üí·ûô·ûï·üí·ûë·û∂·ûõ·üã·ûÅ·üí·ûõ·ûΩ·ûì!",
                strengths: "·ûè·ûæ·û¢·üí·ûì·ûÄ·ûñ·ûº·ûÄ·üÇ·ûò·ûª·ûÅ·ûú·û∑·ûá·üí·ûá·û∂·û¢·üí·ûú·û∏?",
                weaknesses: "·ûè·ûæ·û¢·üí·ûì·ûÄ·ûÅ·üí·ûü·üÑ·ûô·ûò·ûª·ûÅ·ûú·û∑·ûá·üí·ûá·û∂·û¢·üí·ûú·û∏?",
                targetGrade: "·ûè·ûæ·û¢·üí·ûì·ûÄ·ûÖ·ûÑ·üã·ûî·û∂·ûì·ûñ·û∑·ûì·üí·ûë·ûª·ûî·üâ·ûª·ûì·üí·ûò·û∂·ûì?",
                monthsLeft: "·ûì·üÖ·ûü·ûõ·üã·ûî·üâ·ûª·ûì·üí·ûò·û∂·ûì·ûÅ·üÇ·ûä·ûõ·üã Bac II?",
                generateRoadmap: "·ûî·ûÑ·üí·ûÄ·ûæ·ûè·ûï·üÇ·ûì·ûÄ·û∂·ûö·ûö·ûî·ûü·üã·ûÅ·üí·ûâ·ûª·üÜ",
                home: "·ûë·üÜ·ûñ·üê·ûö·ûä·ûæ·ûò",
                lessons: "·ûò·üÅ·ûö·üÄ·ûì",
                donate: "·ûî·ûö·û∑·ûÖ·üí·ûÖ·û∂·ûÇ",
                chat: "·ûá·ûá·üÇ·ûÄ",
                profile: "·ûî·üí·ûö·ûú·ûè·üí·ûè·û∑·ûö·ûº·ûî",
                daysLeft: "·ûê·üí·ûÑ·üÉ·ûì·üÖ·ûü·ûõ·üã·ûä·ûõ·üã Bac II",
                currentStreak: "·ûê·üí·ûÑ·üÉ·ûá·û∂·ûî·üã·ûÇ·üí·ûì·û∂",
                todayChallenge: "·ûî·ûâ·üí·û†·û∂·ûî·üí·ûö·ûà·ûò·ûê·üí·ûÑ·üÉ·ûì·üÅ·üá",
                dailyPlan: "·ûï·üÇ·ûì·ûÄ·û∂·ûö·ûü·ûÄ·ûò·üí·ûò·ûó·û∂·ûñ·ûê·üí·ûÑ·üÉ·ûì·üÅ·üá",
                yourRoadmap: "·ûï·üÇ·ûì·ûÄ·û∂·ûö·ûü·û∑·ûÄ·üí·ûü·û∂·ûï·üí·ûë·û∂·ûõ·üã·ûÅ·üí·ûõ·ûΩ·ûì·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ",
                recommendedTime: "·ûñ·üÅ·ûõ·ûú·üÅ·ûõ·û∂·ûü·û∑·ûÄ·üí·ûü·û∂·ûä·üÇ·ûõ·ûî·û∂·ûì·ûé·üÇ·ûì·û∂·üÜ",
                hoursPerDay: "·ûò·üâ·üÑ·ûÑ/·ûê·üí·ûÑ·üÉ",
                basedOn: "·ûï·üí·û¢·üÇ·ûÄ·ûõ·ûæ·ûÇ·üÑ·ûõ·ûä·üÖ·ûì·û∑·ûÑ·ûñ·üÅ·ûõ·ûú·üÅ·ûõ·û∂·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ",
                roadmapPhases: "·ûä·üÜ·ûé·û∂·ûÄ·üã·ûÄ·û∂·ûõ·ûì·üÉ·ûÄ·û∂·ûö·ûö·üÄ·ûì·ûü·ûº·ûè·üí·ûö·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ",
                todaysPlan: "·ûî·üÜ·ûñ·üÅ·ûâ·ûÄ·û∑·ûÖ·üí·ûÖ·ûÄ·û∂·ûö·ûê·üí·ûÑ·üÉ·ûì·üÅ·üá·ûä·ûæ·ûò·üí·ûî·û∏·ûë·ûë·ûΩ·ûõ·ûî·û∂·ûì 50 XP!",
                completedMsg: "·ûõ·üí·û¢·ûé·û∂·ûü·üã! ·ûè·üí·ûö·ûõ·ûî·üã·ûò·ûÄ·ûú·û∑·ûâ·ûì·üÖ·ûê·üí·ûÑ·üÉ·ûü·üí·û¢·üÇ·ûÄ!",
                math: "·ûÇ·ûé·û∑·ûè·ûú·û∑·ûë·üí·ûô·û∂",
                biology: "·ûá·û∏·ûú·ûú·û∑·ûë·üí·ûô·û∂",
                basicLimits: "·ûõ·û∏·ûò·û∏·ûè·ûò·ûº·ûõ·ûä·üí·ûã·û∂·ûì",
                basicProbability: "·ûî·üí·ûö·ûº·ûî·û∂·ûî·üä·û∏·ûõ·û∏·ûè·üÅ·ûò·ûº·ûõ·ûä·üí·ûã·û∂·ûì",
                humanBody: "·ûö·û∂·ûÑ·ûÄ·û∂·ûô·ûò·ûì·ûª·ûü·üí·ûü",
                humanBrain: "·ûÅ·ûΩ·ûö·ûÄ·üí·ûî·û∂·ûõ·ûò·ûì·ûª·ûü·üí·ûü",
                importanceNote: "·ûü·û∂·ûö·üà·ûü·üÜ·ûÅ·û∂·ûì·üã·ûü·ûò·üí·ûö·û∂·ûî·üã·ûî·üí·ûö·û°·ûÑ",
                summary: "·ûü·ûÑ·üí·ûÅ·üÅ·ûî",
                funFact: "·ûÄ·û∂·ûö·ûñ·û∑·ûè·ûÇ·ûΩ·ûö·û≤·üí·ûô·ûÖ·û∂·ûî·üã·û¢·û∂·ûö·ûò·üí·ûò·ûé·üç",
                surpriseTip: "·ûÇ·ûì·üí·ûõ·ûπ·üá·ûó·üí·ûâ·û∂·ûÄ·üã·ûï·üí·û¢·ûæ·ûõ",
                didYouKnow: "·ûè·ûæ·û¢·üí·ûì·ûÄ·ûä·ûπ·ûÑ·ûë·üÅ?",
                quickChallenge: "·ûî·ûâ·üí·û†·û∂·ûî·üí·ûö·ûà·ûò·ûö·û†·üê·ûü",
                earnXP: "·ûë·ûë·ûΩ·ûõ·ûî·û∂·ûì +20 XP",
                backToLessons: "·ûè·üí·ûö·ûõ·ûî·üã·ûë·üÖ·ûò·üÅ·ûö·üÄ·ûì",
                donateTitle: "·ûÇ·û∂·üÜ·ûë·üí·ûö·ûÄ·û∂·ûö·û¢·ûî·üã·ûö·üÜ",
                donateSubtitle: "100% ·ûë·üÖ·ûá·û∂·û¢·û∂·û†·û∂·ûö·ûº·ûî·ûÄ·ûö·ûé·üç·ûü·ûò·üí·ûö·û∂·ûî·üã·ûü·û∑·ûü·üí·ûü·ûÄ·üí·ûö·û∏·ûÄ·üí·ûö",
                moneyDonation: "·ûî·ûö·û∑·ûÖ·üí·ûÖ·û∂·ûÇ·ûî·üí·ûö·û∂·ûÄ·üã",
                watchAds: "·ûò·ûæ·ûõ·ûï·üí·ûü·û∂·ûô·ûñ·û∂·ûé·û∑·ûá·üí·ûá·ûÄ·ûò·üí·ûò·ûä·ûæ·ûò·üí·ûî·û∏·ûî·ûö·û∑·ûÖ·üí·ûÖ·û∂·ûÇ",
                topDonors: "·û¢·üí·ûì·ûÄ·ûî·ûö·û∑·ûÖ·üí·ûÖ·û∂·ûÇ·ûÄ·üÜ·ûñ·ûº·ûõ",
                thankYou: "·ûü·ûº·ûò·û¢·ûö·ûÇ·ûª·ûé·ûÖ·üÜ·ûñ·üÑ·üá·ûÄ·û∂·ûö·ûÇ·û∂·üÜ·ûë·üí·ûö·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ!",
                aiCoach: "·ûÇ·üí·ûö·ûº·ûî·ûÑ·üí·û†·û∂·ûè·üã AI",
                askQuestion: "·ûü·ûΩ·ûö·ûÅ·üí·ûâ·ûª·üÜ·û¢·üí·ûú·û∏·ûÄ·üè·ûî·û∂·ûì·û¢·üÜ·ûñ·û∏·ûÄ·û∂·ûö·ûü·û∑·ûÄ·üí·ûü·û∂·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ...",
                send: "·ûï·üí·ûâ·ûæ",
                noInternet: "‚ö†Ô∏è ·ûÇ·üí·ûò·û∂·ûì·û¢·üä·û∏·ûì·ûí·û∫·ûé·û∑·ûè·üî ·ûü·ûº·ûò·ûñ·üí·ûô·û∂·ûô·û∂·ûò·ûò·üí·ûè·ûÑ·ûë·üÄ·ûè·ûì·üÖ·ûñ·üÅ·ûõ·ûÄ·üí·ûö·üÑ·ûô·üî",
                commonQuestions: "·ûü·üÜ·ûé·ûΩ·ûö·ûë·ûº·ûë·üÖ",
                viewRoadmap: "·ûò·ûæ·ûõ·ûï·üÇ·ûì·ûÄ·û∂·ûö·ûö·ûî·ûü·üã·ûÅ·üí·ûâ·ûª·üÜ",
                studyNow: "·ûÖ·û∂·ûî·üã·ûï·üí·ûè·ûæ·ûò·ûü·û∑·ûÄ·üí·ûü·û∂",
                motivationQuote: "·ûÄ·û∂·ûö·ûõ·ûæ·ûÄ·ûë·ûπ·ûÄ·ûÖ·û∑·ûè·üí·ûè·ûî·üí·ûö·ûÖ·û∂·üÜ·ûê·üí·ûÑ·üÉ",
                completeLesson: "·ûî·üÜ·ûñ·üÅ·ûâ·ûò·üÅ·ûö·üÄ·ûì",
                practice: "·û¢·ûì·ûª·ûú·ûè·üí·ûè·ûõ·üÜ·û†·û∂·ûè·üã",
                reviewCards: "·ûñ·û∑·ûì·û∑·ûè·üí·ûô·ûÄ·û∂·ûè·ûÖ·ûÑ·ûÖ·û∂·üÜ",
                dailyChallengeTask: "·ûî·ûâ·üí·û†·û∂·ûî·üí·ûö·ûà·ûò·ûî·üí·ûö·ûÖ·û∂·üÜ·ûê·üí·ûÑ·üÉ",
                chooseDepth: "·ûá·üí·ûö·ûæ·ûü·ûö·ûæ·ûü·ûÄ·ûò·üí·ûö·û∑·ûè·ûü·û∑·ûÄ·üí·ûü·û∂:",
                quickReview: "·ûñ·û∑·ûì·û∑·ûè·üí·ûô·ûö·û†·üê·ûü (10 ·ûì·û∂·ûë·û∏)",
                standardStudy: "·ûü·û∑·ûÄ·üí·ûü·û∂·ûü·üí·ûè·ûÑ·üã·ûä·û∂·ûö (30 ·ûì·û∂·ûë·û∏)",
                deepDive: "·ûü·üä·û∏·ûá·ûò·üí·ûö·üÖ (60 ·ûì·û∂·ûë·û∏)",
                chemistry: "·ûÇ·û∏·ûò·û∏·ûú·û∑·ûë·üí·ûô·û∂",
                physics: "·ûö·ûº·ûî·ûú·û∑·ûë·üí·ûô·û∂",
                history: "·ûî·üí·ûö·ûú·ûè·üí·ûè·û∑·ûü·û∂·ûü·üí·ûè·üí·ûö",
                english: "·û¢·ûÑ·üã·ûÇ·üí·ûõ·üÅ·ûü",
                flashcards: "·ûÄ·û∂·ûè·ûÖ·ûÑ·ûÖ·û∂·üÜ",
                practice: "·û¢·ûì·ûª·ûú·ûè·üí·ûè",
                leaderboard: "·ûè·û∂·ûö·û∂·ûÑ·ûõ·üÅ·ûÅ·ûö·üÄ·ûÑ",
                progress: "·ûÄ·û∂·ûö·ûö·û∏·ûÄ·ûÖ·ûò·üí·ûö·ûæ·ûì",
                mockExam: "·ûî·üí·ûö·û°·ûÑ·ûñ·û∑·ûü·üÑ·ûí·ûì·üç",
                startFlashcards: "·ûÖ·û∂·ûî·üã·ûï·üí·ûè·ûæ·ûò·ûÄ·û∂·ûè·ûÖ·ûÑ·ûÖ·û∂·üÜ",
                showAnswer: "·ûî·ûÑ·üí·û†·û∂·ûâ·ûÖ·ûò·üí·ûõ·ûæ·ûô",
                nextCard: "·ûÄ·û∂·ûè·ûî·ûì·üí·ûë·û∂·ûî·üã",
                cardProgress: "·ûÄ·û∂·ûö·ûö·û∏·ûÄ·ûÖ·ûò·üí·ûö·ûæ·ûì·ûÄ·û∂·ûè",
                correct: "·ûè·üí·ûö·ûπ·ûò·ûè·üí·ûö·ûº·ûú",
                incorrect: "·ûò·û∑·ûì·ûè·üí·ûö·ûπ·ûò·ûè·üí·ûö·ûº·ûú",
                startPractice: "·ûÖ·û∂·ûî·üã·ûï·üí·ûè·ûæ·ûò·û¢·ûì·ûª·ûú·ûè·üí·ûè",
                checkAnswer: "·ûñ·û∑·ûì·û∑·ûè·üí·ûô·ûÖ·ûò·üí·ûõ·ûæ·ûô",
                nextQuestion: "·ûü·üÜ·ûé·ûΩ·ûö·ûî·ûì·üí·ûë·û∂·ûî·üã",
                yourAnswer: "·ûÖ·ûò·üí·ûõ·ûæ·ûô·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ",
                correctAnswer: "·ûÖ·ûò·üí·ûõ·ûæ·ûô·ûè·üí·ûö·ûπ·ûò·ûè·üí·ûö·ûº·ûú",
                explanation: "·ûñ·ûì·üí·ûô·ûõ·üã",
                practiceScore: "·ûñ·û∑·ûì·üí·ûë·ûª·û¢·ûì·ûª·ûú·ûè·üí·ûè",
                weakAreas: "·ûè·üÜ·ûî·ûì·üã·ûÅ·üí·ûü·üÑ·ûô",
                topStudents: "·ûü·û∑·ûü·üí·ûü·ûÄ·üÜ·ûñ·ûº·ûõ",
                yourRank: "·ûÖ·üÜ·ûé·û∂·ûè·üã·ûê·üí·ûì·û∂·ûÄ·üã·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ",
                progressOverview: "·ûë·û∑·ûä·üí·ûã·ûó·û∂·ûñ·ûë·ûº·ûë·üÖ·ûì·üÉ·ûÄ·û∂·ûö·ûö·û∏·ûÄ·ûÖ·ûò·üí·ûö·ûæ·ûì",
                topicsCompleted: "·ûî·üí·ûö·ûí·û∂·ûì·ûî·ûë·ûî·û∂·ûì·ûî·ûâ·üí·ûÖ·ûî·üã",
                totalXP: "XP ·ûü·ûö·ûª·ûî",
                totalTime: "·ûñ·üÅ·ûõ·ûú·üÅ·ûõ·û∂·ûü·û∑·ûÄ·üí·ûü·û∂",
                weeklyProgress: "·ûÄ·û∂·ûö·ûö·û∏·ûÄ·ûÖ·ûò·üí·ûö·ûæ·ûì·ûî·üí·ûö·ûÖ·û∂·üÜ·ûü·ûî·üí·ûè·û∂·û†·üç",
                startMockExam: "·ûÖ·û∂·ûî·üã·ûï·üí·ûè·ûæ·ûò·ûî·üí·ûö·û°·ûÑ·ûñ·û∑·ûü·üÑ·ûí·ûì·üç",
                examInstructions: "·ûÜ·üí·ûõ·ûæ·ûô·ûü·üÜ·ûé·ûΩ·ûö·ûë·û∂·üÜ·ûÑ·û¢·ûü·üã·ûä·ûæ·ûò·üí·ûî·û∏·ûò·ûæ·ûõ·ûñ·û∑·ûì·üí·ûë·ûª·ûö·üÄ·ûî·ûÖ·üÜ Bac II",
                submitExam: "·ûä·û∂·ûÄ·üã·ûî·üí·ûö·û°·ûÑ",
                examScore: "·ûñ·û∑·ûì·üí·ûë·ûª·ûî·üí·ûö·û°·ûÑ",
                retakeExam: "·ûí·üí·ûú·ûæ·ûî·üí·ûö·û°·ûÑ·ûò·üí·ûè·ûÑ·ûë·üÄ·ûè",
                bacReadiness: "·ûÄ·û∂·ûö·ûö·üÄ·ûî·ûÖ·üÜ Bac II"
            }
        };

        // Lessons content
        const lessonsData = {
            math: {
                limits: {
                    title: { en: "Basic Limits", km: "·ûõ·û∏·ûò·û∏·ûè·ûò·ûº·ûõ·ûä·üí·ûã·û∂·ûì" },
                    importance: "85%",
                    content: {
                        en: "A limit describes the value that a function approaches as the input approaches some value. Limits are essential for understanding calculus and are frequently tested in Bac II exams.",
                        km: "·ûõ·û∏·ûò·û∏·ûè·ûñ·û∑·ûñ·ûé·üå·ûì·û∂·û¢·üÜ·ûñ·û∏·ûè·ûò·üí·ûõ·üÉ·ûä·üÇ·ûõ·û¢·ûì·ûª·ûÇ·ûò·ûì·üç·ûë·üÖ·ûá·û∑·ûè·ûì·üÖ·ûñ·üÅ·ûõ·ûä·üÇ·ûõ·ûí·û∂·ûè·ûª·ûÖ·ûº·ûõ·ûë·üÖ·ûá·û∑·ûè·ûè·ûò·üí·ûõ·üÉ·ûò·ûΩ·ûô·üî ·ûõ·û∏·ûò·û∏·ûè·ûò·û∂·ûì·ûü·û∂·ûö·üà·ûü·üÜ·ûÅ·û∂·ûì·üã·ûü·ûò·üí·ûö·û∂·ûî·üã·ûÄ·û∂·ûö·ûô·ûõ·üã·ûä·ûπ·ûÑ·ûñ·û∏·ûÄ·û∂·ûõ·üã·ûÇ·ûª·ûõ·ûì·û∑·ûÑ·ûè·üí·ûö·ûº·ûú·ûî·û∂·ûì·ûü·û∂·ûÄ·ûõ·üí·ûî·ûÑ·ûâ·ûπ·ûÄ·ûâ·û∂·ûî·üã·ûì·üÖ·ûÄ·üí·ûì·ûª·ûÑ·ûî·üí·ûö·û°·ûÑ Bac II·üî"
                    },
                    summary: {
                        en: "Key formulas: lim(x‚Üía) f(x) = L. Always check left and right limits separately.",
                        km: "·ûö·ûº·ûî·ûò·ûì·üí·ûè·ûü·üÜ·ûÅ·û∂·ûì·üã: lim(x‚Üía) f(x) = L·üî ·ûè·üí·ûö·ûº·ûú·ûñ·û∑·ûì·û∑·ûè·üí·ûô·ûõ·û∏·ûò·û∏·ûè·ûÅ·û∂·ûÑ·ûÜ·üí·ûú·üÅ·ûÑ·ûì·û∑·ûÑ·ûü·üí·ûè·û∂·üÜ·ûä·û∂·ûÖ·üã·ûä·üÑ·ûô·û°·üÇ·ûÄ·üî"
                    },
                    funFact: {
                        en: "The concept of limits was invented because mathematicians wanted to divide by zero... safely!",
                        km: "·ûÇ·üÜ·ûì·û∑·ûè·ûì·üÉ·ûõ·û∏·ûò·û∏·ûè·ûè·üí·ûö·ûº·ûú·ûî·û∂·ûì·ûî·ûÑ·üí·ûÄ·ûæ·ûè·û°·ûæ·ûÑ·ûñ·üí·ûö·üÑ·üá·ûÇ·ûé·û∑·ûè·ûú·û∑·ûë·ûº·ûÖ·ûÑ·üã·ûÖ·üÇ·ûÄ·ûä·üÑ·ûô·ûü·ûº·ûì·üí·ûô... ·ûî·üâ·ûª·ûì·üí·ûè·üÇ·û≤·üí·ûô·ûò·û∂·ûì·ûü·ûª·ûú·ûè·üí·ûê·û∑·ûó·û∂·ûñ!"
                    },
                    tip: {
                        en: "Pro trick: Always check left and right limits separately - they might not match!",
                        km: "·ûÇ·ûì·üí·ûõ·ûπ·üá·û¢·üí·ûì·ûÄ·ûá·üÜ·ûì·û∂·ûâ: ·ûè·üí·ûö·ûº·ûú·ûè·üÇ·ûñ·û∑·ûì·û∑·ûè·üí·ûô·ûõ·û∏·ûò·û∏·ûè·ûÅ·û∂·ûÑ·ûÜ·üí·ûú·üÅ·ûÑ·ûì·û∑·ûÑ·ûü·üí·ûè·û∂·üÜ·ûä·û∂·ûÖ·üã·ûä·üÑ·ûô·û°·üÇ·ûÄ - ·ûñ·ûΩ·ûÄ·ûú·û∂·ûî·üí·ûö·û†·üÇ·ûõ·ûá·û∂·ûò·û∑·ûì·ûä·ûº·ûÖ·ûÇ·üí·ûì·û∂!"
                    }
                },
                probability: {
                    title: { en: "Basic Probability", km: "·ûî·üí·ûö·ûº·ûî·û∂·ûî·üä·û∏·ûõ·û∏·ûè·üÅ·ûò·ûº·ûõ·ûä·üí·ûã·û∂·ûì" },
                    importance: "40%",
                    content: {
                        en: "Probability measures the likelihood of an event occurring. Combined with combinatorics, it makes up a significant portion of the Bac II math exam.",
                        km: "·ûî·üí·ûö·ûº·ûî·û∂·ûî·üä·û∏·ûõ·û∏·ûè·üÅ·ûú·û∂·ûü·üã·ûú·üÇ·ûÑ·ûõ·ûë·üí·ûí·ûó·û∂·ûñ·ûì·üÉ·ûÄ·û∂·ûö·ûÄ·ûæ·ûè·û°·ûæ·ûÑ·ûì·üÉ·ûñ·üí·ûö·ûπ·ûè·üí·ûè·û∑·ûÄ·û∂·ûö·ûé·üç·ûò·ûΩ·ûô·üî ·ûî·ûâ·üí·ûÖ·ûº·ûõ·ûÇ·üí·ûì·û∂·ûá·û∂·ûò·ûΩ·ûô·ûÄ·ûª·üÜ·ûî·üä·û∏·ûé·û∂·ûë·üê·ûö ·ûú·û∂·ûî·ûÑ·üí·ûÄ·ûæ·ûè·ûá·û∂·ûï·üí·ûì·üÇ·ûÄ·ûü·üÜ·ûÅ·û∂·ûì·üã·ûì·üÉ·ûî·üí·ûö·û°·ûÑ·ûÇ·ûé·û∑·ûè·ûú·û∑·ûë·üí·ûô·û∂ Bac II·üî"
                    },
                    summary: {
                        en: "P(Event) = Favorable Outcomes / Total Outcomes. Use tree diagrams for complex problems.",
                        km: "P(·ûñ·üí·ûö·ûπ·ûè·üí·ûè·û∑·ûÄ·û∂·ûö·ûé·üç) = ·ûõ·ûë·üí·ûí·ûï·ûõ·û¢·üÜ·ûé·üÑ·ûô·ûï·ûõ / ·ûõ·ûë·üí·ûí·ûï·ûõ·ûü·ûö·ûª·ûî·üî ·ûî·üí·ûö·ûæ·ûä·üí·ûô·û∂·ûÄ·üí·ûö·û∂·ûò·ûä·ûæ·ûò·ûà·ûæ·ûü·ûò·üí·ûö·û∂·ûî·üã·ûî·ûâ·üí·û†·û∂·ûü·üí·ûò·ûª·ûÇ·ûü·üí·ûò·û∂·ûâ·üî"
                    },
                    funFact: {
                        en: "Flipping a coin 10 times heads doesn't make tails more likely next time! Each flip is independent.",
                        km: "·ûÄ·û∂·ûö·ûî·üÑ·üá·ûÄ·û∂·ûÄ·üã 10 ·ûä·ûÑ·ûÖ·üÅ·ûâ·ûÄ·üí·ûî·û∂·ûõ·ûò·û∑·ûì·ûí·üí·ûú·ûæ·û≤·üí·ûô·ûÄ·ûì·üí·ûë·ûª·ûô·ûò·û∂·ûì·ûõ·ûë·üí·ûí·ûó·û∂·ûñ·ûÖ·üí·ûö·ûæ·ûì·ûì·üÖ·ûñ·üÅ·ûõ·ûî·ûì·üí·ûë·û∂·ûî·üã·ûë·üÅ! ·ûÄ·û∂·ûö·ûî·üÑ·üá·ûì·û∏·ûò·ûΩ·ûô·üó·ûØ·ûÄ·ûö·û∂·ûá·üí·ûô·ûÇ·üí·ûì·û∂·üî"
                    },
                    tip: {
                        en: "Draw tree diagrams for complex problems - it's much faster and you won't miss cases!",
                        km: "·ûÇ·ûº·ûö·ûä·üí·ûô·û∂·ûÄ·üí·ûö·û∂·ûò·ûä·ûæ·ûò·ûà·ûæ·ûü·ûò·üí·ûö·û∂·ûî·üã·ûî·ûâ·üí·û†·û∂·ûü·üí·ûò·ûª·ûÇ·ûü·üí·ûò·û∂·ûâ - ·ûú·û∂·ûö·û†·üê·ûü·ûá·û∂·ûÑ·ûì·û∑·ûÑ·û¢·üí·ûì·ûÄ·ûì·ûπ·ûÑ·ûò·û∑·ûì·ûö·üÜ·ûõ·ûÑ·ûÄ·ûö·ûé·û∏·ûë·üÅ!"
                    }
                }
            },
            biology: {
                body: {
                    title: { en: "Human Body", km: "·ûö·û∂·ûÑ·ûÄ·û∂·ûô·ûò·ûì·ûª·ûü·üí·ûü" },
                    importance: "65%",
                    content: {
                        en: "The human body consists of multiple organ systems working together. The digestive system is the most frequently tested topic in Bac II biology exams.",
                        km: "·ûö·û∂·ûÑ·ûÄ·û∂·ûô·ûò·ûì·ûª·ûü·üí·ûü·ûò·û∂·ûì·ûî·üí·ûö·ûñ·üê·ûì·üí·ûí·ûü·ûö·û∏·ûö·û∂·ûÑ·üí·ûÇ·ûÖ·üí·ûö·ûæ·ûì·ûä·üÇ·ûõ·ûí·üí·ûú·ûæ·ûÄ·û∂·ûö·ûá·û∂·ûò·ûΩ·ûô·ûÇ·üí·ûì·û∂·üî ·ûî·üí·ûö·ûñ·üê·ûì·üí·ûí·ûö·üÜ·ûõ·û∂·ûô·û¢·û∂·û†·û∂·ûö·ûÇ·û∫·ûá·û∂·ûî·üí·ûö·ûí·û∂·ûì·ûî·ûë·ûä·üÇ·ûõ·ûè·üí·ûö·ûº·ûú·ûî·û∂·ûì·ûü·û∂·ûÄ·ûõ·üí·ûî·ûÑ·ûâ·ûπ·ûÄ·ûâ·û∂·ûî·üã·ûî·üÜ·ûï·ûª·ûè·ûì·üÖ·ûÄ·üí·ûì·ûª·ûÑ·ûî·üí·ûö·û°·ûÑ·ûá·û∏·ûú·ûú·û∑·ûë·üí·ûô·û∂ Bac II·üî"
                    },
                    summary: {
                        en: "Major systems: Digestive, Respiratory, Circulatory, Nervous, Skeletal, Muscular. Make colorful diagrams!",
                        km: "·ûî·üí·ûö·ûñ·üê·ûì·üí·ûí·ûü·üÜ·ûÅ·û∂·ûì·üã·üó: ·ûö·üÜ·ûõ·û∂·ûô·û¢·û∂·û†·û∂·ûö ·ûä·ûÑ·üí·û†·ûæ·ûò ·ûÖ·ûö·û∂·ûÖ·ûö·ûà·û∂·ûò ·ûü·ûö·ûü·üÉ·ûî·üí·ûö·ûü·û∂·ûë ·ûÇ·üí·ûö·üÑ·ûÑ·ûÜ·üí·û¢·ûπ·ûÑ ·ûü·û∂·ûÖ·üã·ûä·ûª·üÜ·üî ·ûí·üí·ûú·ûæ·ûä·üí·ûô·û∂·ûÄ·üí·ûö·û∂·ûò·ûñ·ûé·üå!"
                    },
                    funFact: {
                        en: "Your stomach gets a completely new lining every 3-4 days to protect itself from its own acid!",
                        km: "·ûÄ·üí·ûö·ûñ·üá·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ·ûë·ûë·ûΩ·ûõ·ûî·û∂·ûì·ûü·üí·ûö·ûë·û∂·ûî·üã·ûê·üí·ûò·û∏·ûë·û∂·üÜ·ûÑ·ûü·üí·ûö·ûª·ûÑ·ûö·üÄ·ûÑ·ûö·û∂·ûõ·üã 3-4 ·ûê·üí·ûÑ·üÉ·ûä·ûæ·ûò·üí·ûî·û∏·ûÄ·û∂·ûö·ûñ·û∂·ûö·ûÅ·üí·ûõ·ûΩ·ûì·ûØ·ûÑ·ûñ·û∏·û¢·û∂·ûü·üä·û∏·ûè·ûö·ûî·ûü·üã·ûú·û∂!"
                    },
                    tip: {
                        en: "Make body system diagrams with different colors for each organ - much easier to remember!",
                        km: "·ûí·üí·ûú·ûæ·ûä·üí·ûô·û∂·ûÄ·üí·ûö·û∂·ûò·ûî·üí·ûö·ûñ·üê·ûì·üí·ûí·ûö·û∂·ûÑ·ûÄ·û∂·ûô·ûä·üÑ·ûô·ûñ·ûé·üå·ûï·üí·ûü·üÅ·ûÑ·üó·ûÇ·üí·ûì·û∂·ûü·ûò·üí·ûö·û∂·ûî·üã·ûü·ûö·û∏·ûö·û∂·ûÑ·üí·ûÇ·ûì·û∏·ûò·ûΩ·ûô·üó - ·ûÑ·û∂·ûô·ûì·ûπ·ûÄ·ûÖ·û∂·üÜ·ûá·û∂·ûÑ!"
                    },
                    didYouKnow: {
                        en: "You have the same number of bones in your neck as a giraffe: 7 cervical vertebrae!",
                        km: "·û¢·üí·ûì·ûÄ·ûò·û∂·ûì·ûÜ·üí·û¢·ûπ·ûÑ·ûÄ·üí·ûì·ûª·ûÑ·ûÄ·ûì·üÖ·ûä·ûº·ûÖ·ûÇ·üí·ûì·û∂·ûá·û∂·ûò·ûΩ·ûô·û†·üí·ûü·û∏·ûö·üâ·û∂·û†·üí·ûú: 7 ·ûÄ·ûÑ·ûÜ·üí·û¢·ûπ·ûÑ·ûÄ·ûÑ!"
                    }
                },
                brain: {
                    title: { en: "Human Brain", km: "·ûÅ·ûΩ·ûö·ûÄ·üí·ûî·û∂·ûõ·ûò·ûì·ûª·ûü·üí·ûü" },
                    importance: "70%",
                    content: {
                        en: "The human brain controls all body functions through billions of neurons. Understanding neuron structure is critical for Bac II exams.",
                        km: "·ûÅ·ûΩ·ûö·ûÄ·üí·ûî·û∂·ûõ·ûò·ûì·ûª·ûü·üí·ûü·ûÇ·üí·ûö·ûî·üã·ûÇ·üí·ûö·ûÑ·ûò·ûª·ûÅ·ûÑ·û∂·ûö·ûë·û∂·üÜ·ûÑ·û¢·ûü·üã·ûö·ûî·ûü·üã·ûö·û∂·ûÑ·ûÄ·û∂·ûô·ûè·û∂·ûò·ûö·ûô·üà·ûé·û∫·ûö·üâ·ûº·ûì·ûö·û∂·ûî·üã·ûñ·û∂·ûì·üã·ûõ·û∂·ûì·üî ·ûÄ·û∂·ûö·ûô·ûõ·üã·ûä·ûπ·ûÑ·ûñ·û∏·ûö·ûÖ·ûì·û∂·ûü·ûò·üí·ûñ·üê·ûì·üí·ûí·ûé·û∫·ûö·üâ·ûº·ûì·ûÇ·û∫·ûü·üÜ·ûÅ·û∂·ûì·üã·ûü·ûò·üí·ûö·û∂·ûî·üã·ûî·üí·ûö·û°·ûÑ Bac II·üî"
                    },
                    summary: {
                        en: "Main parts: Cerebrum (thinking), Cerebellum (coordination), Brain stem (vital functions). Neurons communicate via synapses.",
                        km: "·ûï·üí·ûì·üÇ·ûÄ·ûü·üÜ·ûÅ·û∂·ûì·üã·üó: ·ûü·üÅ·ûö·üÅ·ûî·üí·ûö·ûª·ûò (·ûÇ·üÜ·ûì·û∑·ûè), ·ûü·üÅ·ûö·üÅ·ûî·üÇ·ûõ (·ûÄ·û∂·ûö·ûü·ûò·üí·ûö·ûî·ûü·ûò·üí·ûö·ûΩ·ûõ), ·ûä·ûæ·ûò·ûÅ·ûΩ·ûö·ûÄ·üí·ûî·û∂·ûõ (·ûò·ûª·ûÅ·ûÑ·û∂·ûö·ûü·üÜ·ûÅ·û∂·ûì·üã)·üî ·ûé·û∫·ûö·üâ·ûº·ûì·ûë·üÜ·ûì·û∂·ûÄ·üã·ûë·üÜ·ûì·ûÑ·ûè·û∂·ûò·ûö·ûô·üà·ûü·üä·û∏·ûé·û∂·ûî·üî"
                    },
                    funFact: {
                        en: "Your brain uses 20% of your body's total energy but is only 2% of your body weight!",
                        km: "·ûÅ·ûΩ·ûö·ûÄ·üí·ûî·û∂·ûõ·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ·ûî·üí·ûö·ûæ 20% ·ûì·üÉ·ûê·û∂·ûò·ûñ·ûõ·ûü·ûö·ûª·ûî·ûö·ûî·ûü·üã·ûö·û∂·ûÑ·ûÄ·û∂·ûô·ûî·üâ·ûª·ûì·üí·ûè·üÇ·ûò·û∂·ûì·ûè·üÇ 2% ·ûì·üÉ·ûë·ûò·üí·ûÑ·ûì·üã·ûö·û∂·ûÑ·ûÄ·û∂·ûô!"
                    },
                    tip: {
                        en: "Connect brain parts to their functions using memorable stories - it sticks better than pure memorization!",
                        km: "·ûó·üí·ûá·û∂·ûî·üã·ûï·üí·ûì·üÇ·ûÄ·ûÅ·ûΩ·ûö·ûÄ·üí·ûî·û∂·ûõ·ûë·üÖ·ûì·ûπ·ûÑ·ûò·ûª·ûÅ·ûÑ·û∂·ûö·ûö·ûî·ûü·üã·ûú·û∂·ûä·üÑ·ûô·ûî·üí·ûö·ûæ·ûö·ûø·ûÑ·ûä·üÇ·ûõ·ûÖ·ûÑ·ûÖ·û∂·üÜ·ûî·û∂·ûì - ·ûú·û∂·ûü·üí·û¢·û∑·ûè·ûá·û∂·ûÑ·ûÄ·û∂·ûö·ûÖ·ûÑ·ûÖ·û∂·üÜ·ûü·ûª·ûë·üí·ûí·ûü·û∂·ûí!"
                    },
                    didYouKnow: {
                        en: "You have enough neurons in your brain to count every star in the Milky Way galaxy!",
                        km: "·û¢·üí·ûì·ûÄ·ûò·û∂·ûì·ûé·û∫·ûö·üâ·ûº·ûì·ûÇ·üí·ûö·ûî·üã·ûÇ·üí·ûö·û∂·ûì·üã·ûÄ·üí·ûì·ûª·ûÑ·ûÅ·ûΩ·ûö·ûÄ·üí·ûî·û∂·ûõ·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ·ûä·ûæ·ûò·üí·ûî·û∏·ûö·û∂·ûî·üã·ûï·üí·ûÄ·û∂·ûô·ûë·û∂·üÜ·ûÑ·û¢·ûü·üã·ûì·üÖ·ûÄ·üí·ûì·ûª·ûÑ·ûÄ·û∂·û°·û∂·ûÄ·üã·ûü·üä·û∏ Milky Way!"
                    }
                }
            }
        };

        // Flashcards data
        const flashcardsData = {
            math: [
                { q: { en: "What is a limit?", km: "·ûè·ûæ·ûõ·û∏·ûò·û∏·ûè·ûá·û∂·û¢·üí·ûú·û∏?" }, a: { en: "The value a function approaches as input approaches a value", km: "·ûè·ûò·üí·ûõ·üÉ·ûä·üÇ·ûõ·û¢·ûì·ûª·ûÇ·ûò·ûì·üç·ûë·üÖ·ûá·û∑·ûè·ûì·üÖ·ûñ·üÅ·ûõ·ûí·û∂·ûè·ûª·ûÖ·ûº·ûõ·ûë·üÖ·ûá·û∑·ûè·ûè·ûò·üí·ûõ·üÉ·ûò·ûΩ·ûô" }, topic: "limits" },
                { q: { en: "Formula for probability?", km: "·ûö·ûº·ûî·ûò·ûì·üí·ûè·ûî·üí·ûö·ûº·ûî·û∂·ûî·üä·û∏·ûõ·û∏·ûè·üÅ?" }, a: { en: "P(E) = Favorable outcomes / Total outcomes", km: "P(E) = ·ûõ·ûë·üí·ûí·ûï·ûõ·û¢·üÜ·ûé·üÑ·ûô·ûï·ûõ / ·ûõ·ûë·üí·ûí·ûï·ûõ·ûü·ûö·ûª·ûî" }, topic: "probability" },
                { q: { en: "What is 0/0 in limits?", km: "·ûè·ûæ 0/0 ·ûì·üÖ·ûÄ·üí·ûì·ûª·ûÑ·ûõ·û∏·ûò·û∏·ûè·ûá·û∂·û¢·üí·ûú·û∏?" }, a: { en: "Indeterminate form - use factoring or L'H√¥pital's rule", km: "·ûë·ûò·üí·ûö·ûÑ·üã·ûò·û∑·ûì·ûÄ·üÜ·ûé·ûè·üã - ·ûî·üí·ûö·ûæ·ûä·û∂·ûÄ·üã·ûÄ·ûè·üí·ûè·û∂ ·û¨·ûÖ·üí·ûî·û∂·ûî·üã L'H√¥pital" }, topic: "limits" },
                { q: { en: "What is a variable?", km: "·ûè·ûæ·û¢·ûê·üÅ·ûö·ûá·û∂·û¢·üí·ûú·û∏?" }, a: { en: "A symbol that represents a number (like x or y)", km: "·ûì·û∑·ûò·û∑·ûè·üí·ûè·ûü·ûâ·üí·ûâ·û∂·ûä·üÇ·ûõ·ûè·üÜ·ûé·û∂·ûÑ·ûõ·üÅ·ûÅ (·ûä·ûº·ûÖ·ûá·û∂ x ·û¨ y)" }, topic: "foundation" },
                { q: { en: "What is an equation?", km: "·ûè·ûæ·ûü·ûò·û∏·ûÄ·û∂·ûö·ûá·û∂·û¢·üí·ûú·û∏?" }, a: { en: "A mathematical statement that two things are equal", km: "·ûü·üÅ·ûÖ·ûÄ·üí·ûè·û∏·ûê·üí·ûõ·üÇ·ûÑ·ûÄ·û∂·ûö·ûé·üç·ûÇ·ûé·û∑·ûè·ûú·û∑·ûë·üí·ûô·û∂·ûê·û∂·û¢·üí·ûú·û∏·ûñ·û∏·ûö·ûü·üí·ûò·ûæ·ûÇ·üí·ûì·û∂" }, topic: "foundation" }
            ],
            biology: [
                { q: { en: "How many bones in the neck?", km: "·ûè·ûæ·ûò·û∂·ûì·ûÜ·üí·û¢·ûπ·ûÑ·ûî·üâ·ûª·ûì·üí·ûò·û∂·ûì·ûì·üÖ·ûÄ?" }, a: { en: "7 cervical vertebrae", km: "7 ·ûÄ·ûÑ·ûÜ·üí·û¢·ûπ·ûÑ·ûÄ" }, topic: "body" },
                { q: { en: "Main parts of the brain?", km: "·ûï·üí·ûì·üÇ·ûÄ·ûü·üÜ·ûÅ·û∂·ûì·üã·ûì·üÉ·ûÅ·ûΩ·ûö·ûÄ·üí·ûî·û∂·ûõ?" }, a: { en: "Cerebrum, Cerebellum, Brain stem", km: "·ûü·üÅ·ûö·üÅ·ûî·üí·ûö·ûª·ûò, ·ûü·üÅ·ûö·üÅ·ûî·üÇ·ûõ, ·ûä·ûæ·ûò·ûÅ·ûΩ·ûö·ûÄ·üí·ûî·û∂·ûõ" }, topic: "brain" },
                { q: { en: "What does the cerebrum control?", km: "·ûè·ûæ·ûü·üÅ·ûö·üÅ·ûî·üí·ûö·ûª·ûò·ûÇ·üí·ûö·ûî·üã·ûÇ·üí·ûö·ûÑ·û¢·üí·ûú·û∏?" }, a: { en: "Thinking, memory, and voluntary movement", km: "·ûÄ·û∂·ûö·ûÇ·û∑·ûè ·ûÄ·û∂·ûö·ûÖ·ûÑ·ûÖ·û∂·üÜ ·ûì·û∑·ûÑ·ûÖ·ûõ·ûì·û∂·ûü·üí·ûò·üê·ûÇ·üí·ûö·ûÖ·û∑·ûè·üí·ûè" }, topic: "brain" },
                { q: { en: "What is a cell?", km: "·ûè·ûæ·ûÄ·üÑ·ûü·û∑·ûÄ·û∂·ûá·û∂·û¢·üí·ûú·û∏?" }, a: { en: "The basic unit of all living things", km: "·ûØ·ûÄ·ûè·û∂·ûò·ûº·ûõ·ûä·üí·ûã·û∂·ûì·ûì·üÉ·ûü·û∂·ûö·ûñ·û∂·ûÑ·üí·ûÇ·ûö·ûü·üã·ûë·û∂·üÜ·ûÑ·û¢·ûü·üã" }, topic: "foundation" },
                { q: { en: "What is an organ?", km: "·ûè·ûæ·ûü·ûö·û∏·ûö·û∂·ûÑ·üí·ûÇ·ûá·û∂·û¢·üí·ûú·û∏?" }, a: { en: "A group of tissues working together", km: "·ûÄ·üí·ûö·ûª·ûò·ûá·û∂·ûõ·û∑·ûÄ·û∂·ûä·üÇ·ûõ·ûí·üí·ûú·ûæ·ûÄ·û∂·ûö·ûá·û∂·ûò·ûΩ·ûô·ûÇ·üí·ûì·û∂" }, topic: "foundation" }
            ]
        };

        // Foundation lessons data
        const foundationLessons = {
            math: {
                title: { en: "Math Foundation", km: "·ûÇ·üí·ûö·ûπ·üá·ûÇ·ûé·û∑·ûè·ûú·û∑·ûë·üí·ûô·û∂" },
                importance: "100%",
                content: {
                    en: "Before diving into advanced topics, let's review the basics. Understanding variables, equations, and basic operations is essential for all math topics.",
                    km: "·ûò·ûª·ûì·ûñ·üÅ·ûõ·ûÖ·ûº·ûõ·ûë·üÖ·ûÄ·üí·ûì·ûª·ûÑ·ûî·üí·ûö·ûí·û∂·ûì·ûî·ûë·ûÄ·ûò·üí·ûö·û∑·ûè·ûÅ·üí·ûñ·ûü·üã ·ûè·üÑ·üá·ûñ·û∑·ûì·û∑·ûè·üí·ûô·ûò·ûº·ûõ·ûä·üí·ûã·û∂·ûì·üî ·ûÄ·û∂·ûö·ûô·ûõ·üã·ûä·ûπ·ûÑ·û¢·üÜ·ûñ·û∏·û¢·ûê·üÅ·ûö ·ûü·ûò·û∏·ûÄ·û∂·ûö ·ûì·û∑·ûÑ·ûî·üí·ûö·ûè·û∑·ûî·ûè·üí·ûè·û∑·ûÄ·û∂·ûö·ûò·ûº·ûõ·ûä·üí·ûã·û∂·ûì·ûò·û∂·ûì·ûü·û∂·ûö·üà·ûü·üÜ·ûÅ·û∂·ûì·üã·ûü·ûò·üí·ûö·û∂·ûî·üã·ûÇ·ûé·û∑·ûè·ûú·û∑·ûë·üí·ûô·û∂·ûë·û∂·üÜ·ûÑ·û¢·ûü·üã·üî"
                },
                summary: {
                    en: "Variables (x, y) represent unknown numbers. Equations show equality (2x + 3 = 7). Master these to succeed in advanced math.",
                    km: "·û¢·ûê·üÅ·ûö (x, y) ·ûè·üÜ·ûé·û∂·ûÑ·ûõ·üÅ·ûÅ·ûò·û∑·ûì·ûü·üí·ûÇ·û∂·ûõ·üã·üî ·ûü·ûò·û∏·ûÄ·û∂·ûö·ûî·ûÑ·üí·û†·û∂·ûâ·ûü·ûò·ûó·û∂·ûñ (2x + 3 = 7)·üî ·ûè·üí·ûö·ûΩ·ûè·ûñ·û∑·ûì·û∑·ûè·üí·ûô·ûë·û∂·üÜ·ûÑ·ûì·üÅ·üá·ûä·ûæ·ûò·üí·ûî·û∏·ûá·üÑ·ûÇ·ûá·üê·ûô·ûÄ·üí·ûì·ûª·ûÑ·ûÇ·ûé·û∑·ûè·ûú·û∑·ûë·üí·ûô·û∂·ûÄ·ûò·üí·ûö·û∑·ûè·ûÅ·üí·ûñ·ûü·üã·üî"
                },
                funFact: {
                    en: "The word 'algebra' comes from an Arabic word meaning 'reunion of broken parts'!",
                    km: "·ûñ·û∂·ûÄ·üí·ûô 'algebra' ·ûò·ûÄ·ûñ·û∏·ûñ·û∂·ûÄ·üí·ûô·û¢·û∂·ûö·üâ·û∂·ûî·üã·ûä·üÇ·ûõ·ûò·û∂·ûì·ûì·üê·ûô·ûê·û∂ '·ûÄ·û∂·ûö·ûö·ûΩ·ûî·ûö·ûΩ·ûò·ûì·üÉ·ûï·üí·ûì·üÇ·ûÄ·ûî·üÇ·ûÄ'!"
                },
                tip: {
                    en: "Always isolate the variable on one side of the equation. What you do to one side, do to the other!",
                    km: "·ûè·üÇ·ûÑ·ûè·üÇ·ûä·û∂·ûÖ·üã·û¢·ûê·üÅ·ûö·ûì·üÖ·ûò·üí·ûÅ·û∂·ûÑ·ûì·üÉ·ûü·ûò·û∏·ûÄ·û∂·ûö·üî ·û¢·üí·ûú·û∏·ûä·üÇ·ûõ·û¢·üí·ûì·ûÄ·ûí·üí·ûú·ûæ·ûì·üÖ·ûò·üí·ûÅ·û∂·ûÑ ·ûí·üí·ûú·ûæ·ûë·üÖ·ûò·üí·ûÅ·û∂·ûÑ·ûë·üÄ·ûè!"
                }
            },
            biology: {
                title: { en: "Biology Foundation", km: "·ûÇ·üí·ûö·ûπ·üá·ûá·û∏·ûú·ûú·û∑·ûë·üí·ûô·û∂" },
                importance: "100%",
                content: {
                    en: "All living things are made of cells. Cells form tissues, tissues form organs, and organs form organ systems. Understanding this hierarchy is key to biology.",
                    km: "·ûü·û∂·ûö·ûñ·û∂·ûÑ·üí·ûÇ·ûö·ûü·üã·ûë·û∂·üÜ·ûÑ·û¢·ûü·üã·ûè·üí·ûö·ûº·ûú·ûî·û∂·ûì·ûî·ûÑ·üí·ûÄ·ûæ·ûè·ûñ·û∏·ûÄ·üÑ·ûü·û∑·ûÄ·û∂·üî ·ûÄ·üÑ·ûü·û∑·ûÄ·û∂·ûî·ûÑ·üí·ûÄ·ûæ·ûè·ûá·û∂·ûõ·û∑·ûÄ·û∂ ·ûá·û∂·ûõ·û∑·ûÄ·û∂·ûî·ûÑ·üí·ûÄ·ûæ·ûè·ûü·ûö·û∏·ûö·û∂·ûÑ·üí·ûÇ ·ûì·û∑·ûÑ·ûü·ûö·û∏·ûö·û∂·ûÑ·üí·ûÇ·ûî·ûÑ·üí·ûÄ·ûæ·ûè·ûî·üí·ûö·ûñ·üê·ûì·üí·ûí·ûü·ûö·û∏·ûö·û∂·ûÑ·üí·ûÇ·üî ·ûÄ·û∂·ûö·ûô·ûõ·üã·ûä·ûπ·ûÑ·û¢·üÜ·ûñ·û∏·ûã·û∂·ûì·û∂·ûì·ûª·ûÄ·üí·ûö·ûò·ûì·üÅ·üá·ûÇ·û∫·ûá·û∂·ûÇ·ûì·üí·ûõ·ûπ·üá·ûì·üÉ·ûá·û∏·ûú·ûú·û∑·ûë·üí·ûô·û∂·üî"
                },
                summary: {
                    en: "Cell ‚Üí Tissue ‚Üí Organ ‚Üí Organ System ‚Üí Organism. This is the biological hierarchy of organization.",
                    km: "·ûÄ·üÑ·ûü·û∑·ûÄ·û∂ ‚Üí ·ûá·û∂·ûõ·û∑·ûÄ·û∂ ‚Üí ·ûü·ûö·û∏·ûö·û∂·ûÑ·üí·ûÇ ‚Üí ·ûî·üí·ûö·ûñ·üê·ûì·üí·ûí·ûü·ûö·û∏·ûö·û∂·ûÑ·üí·ûÇ ‚Üí ·ûü·û∂·ûö·ûñ·û∂·ûÑ·üí·ûÇ·üî ·ûì·üÅ·üá·ûÇ·û∫·ûá·û∂·ûã·û∂·ûì·û∂·ûì·ûª·ûÄ·üí·ûö·ûò·ûá·û∏·ûú·ûü·û∂·ûü·üí·ûè·üí·ûö·ûì·üÉ·ûÄ·û∂·ûö·ûö·üÄ·ûî·ûÖ·üÜ·üî"
                },
                funFact: {
                    en: "Your body has about 37 trillion cells! That's 37,000,000,000,000 cells!",
                    km: "·ûö·û∂·ûÑ·ûÄ·û∂·ûô·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ·ûò·û∂·ûì·ûÄ·üÑ·ûü·û∑·ûÄ·û∂·ûî·üí·ûö·û†·üÇ·ûõ 37 ·ûè·üí·ûö·û∏·ûõ·û∂·ûì! ·ûì·üÑ·üá·ûÇ·û∫ 37,000,000,000,000 ·ûÄ·üÑ·ûü·û∑·ûÄ·û∂!"
                },
                tip: {
                    en: "Draw diagrams! Visual learning helps you remember the structure of organs and systems.",
                    km: "·ûÇ·ûº·ûö·ûä·üí·ûô·û∂·ûÄ·üí·ûö·û∂·ûò! ·ûÄ·û∂·ûö·ûö·üÄ·ûì·ûä·üÑ·ûô·ûò·ûæ·ûõ·ûÉ·ûæ·ûâ·ûá·ûΩ·ûô·û¢·üí·ûì·ûÄ·ûÖ·ûÑ·ûÖ·û∂·üÜ·ûö·ûÖ·ûì·û∂·ûü·ûò·üí·ûñ·üê·ûì·üí·ûí·ûü·ûö·û∏·ûö·û∂·ûÑ·üí·ûÇ·ûì·û∑·ûÑ·ûî·üí·ûö·ûñ·üê·ûì·üí·ûí·üî"
                },
                didYouKnow: {
                    en: "Red blood cells live for only 120 days before being replaced!",
                    km: "·ûÄ·üÑ·ûü·û∑·ûÄ·û∂·ûà·û∂·ûò·ûÄ·üí·ûö·û†·ûò·ûö·ûü·üã·ûè·üÇ 120 ·ûê·üí·ûÑ·üÉ·ûò·ûª·ûì·ûñ·üÅ·ûõ·ûè·üí·ûö·ûº·ûú·ûî·û∂·ûì·ûá·üÜ·ûì·ûΩ·ûü!"
                }
            }
        };

        // Practice questions data
        const practiceData = {
            math: [
                { q: { en: "Calculate: lim(x‚Üí2) (x¬≤ - 4)/(x - 2)", km: "·ûÇ·ûé·ûì·û∂: lim(x‚Üí2) (x¬≤ - 4)/(x - 2)" }, correct: "4", options: ["2", "4", "0", "undefined"], explanation: { en: "Factor as (x+2)(x-2)/(x-2) = x+2, substitute x=2 ‚Üí answer is 4", km: "·ûä·û∂·ûÄ·üã·ûÄ·ûè·üí·ûè·û∂·ûá·û∂ (x+2)(x-2)/(x-2) = x+2, ·ûá·üÜ·ûì·ûΩ·ûü x=2 ‚Üí ·ûÖ·ûò·üí·ûõ·ûæ·ûô·ûÇ·û∫ 4" } },
                { q: { en: "A coin is flipped twice. P(both heads)?", km: "·ûî·üÑ·üá·ûÄ·û∂·ûÄ·üã·ûñ·û∏·ûö·ûä·ûÑ·üî P(·ûë·û∂·üÜ·ûÑ·ûñ·û∏·ûö·ûÄ·üí·ûî·û∂·ûõ)?" }, correct: "1/4", options: ["1/2", "1/4", "1/3", "2/3"], explanation: { en: "P(H) √ó P(H) = 1/2 √ó 1/2 = 1/4", km: "P(H) √ó P(H) = 1/2 √ó 1/2 = 1/4" } }
            ],
            biology: [
                { q: { en: "Which part coordinates balance?", km: "·ûï·üí·ûì·üÇ·ûÄ·ûé·û∂·ûü·ûò·üí·ûö·ûî·ûü·ûò·üí·ûö·ûΩ·ûõ·ûè·ûª·ûõ·üí·ûô·ûó·û∂·ûñ?" }, correct: "Cerebellum", options: ["Cerebrum", "Cerebellum", "Brain stem", "Neuron"], explanation: { en: "The cerebellum controls coordination and balance", km: "·ûü·üÅ·ûö·üÅ·ûî·üÇ·ûõ·ûÇ·üí·ûö·ûî·üã·ûÇ·üí·ûö·ûÑ·ûÄ·û∂·ûö·ûü·ûò·üí·ûö·ûî·ûü·ûò·üí·ûö·ûΩ·ûõ·ûì·û∑·ûÑ·ûè·ûª·ûõ·üí·ûô·ûó·û∂·ûñ" } },
                { q: { en: "Stomach lining regenerates every?", km: "·ûü·üí·ûö·ûë·û∂·ûî·üã·ûÄ·üí·ûö·ûñ·üá·ûÄ·ûæ·ûè·û°·ûæ·ûÑ·ûú·û∑·ûâ·ûö·üÄ·ûÑ·ûö·û∂·ûõ·üã?" }, correct: "3-4 days", options: ["1 day", "3-4 days", "1 week", "1 month"], explanation: { en: "Stomach gets new lining every 3-4 days to protect from acid", km: "·ûÄ·üí·ûö·ûñ·üá·ûë·ûë·ûΩ·ûõ·ûî·û∂·ûì·ûü·üí·ûö·ûë·û∂·ûî·üã·ûê·üí·ûò·û∏·ûö·üÄ·ûÑ·ûö·û∂·ûõ·üã 3-4 ·ûê·üí·ûÑ·üÉ·ûä·ûæ·ûò·üí·ûî·û∏·ûÄ·û∂·ûö·ûñ·û∂·ûö·ûñ·û∏·û¢·û∂·ûü·üä·û∏·ûè" } }
            ]
        };

        // Leaderboard data
        const leaderboardData = [
            { name: "Sokha", xp: 2450, level: 8, streak: 12, avatar: "üë®" },
            { name: "Dara", xp: 2100, level: 7, streak: 9, avatar: "üë©" },
            { name: "Visal", xp: 1850, level: 6, streak: 15, avatar: "üë¶" },
            { name: "Sreymom", xp: 1600, level: 6, streak: 7, avatar: "üëß" },
            { name: "Ratanak", xp: 1400, level: 5, streak: 10, avatar: "üë®" }
        ];

        // Mock exam questions
        const mockExamData = [
            { subject: "math", q: { en: "Evaluate: lim(x‚Üí0) sin(x)/x", km: "·ûú·û∂·ûô·ûè·ûò·üí·ûõ·üÉ: lim(x‚Üí0) sin(x)/x" }, correct: "1", options: ["0", "1", "‚àû", "undefined"] },
            { subject: "math", q: { en: "P(rolling a 6 on dice)?", km: "P(·ûî·üÑ·üá·ûõ·û∏·ûü·ûî·û∂·ûì 6)?" }, correct: "1/6", options: ["1/2", "1/6", "1/3", "1/12"] },
            { subject: "biology", q: { en: "Main function of neurons?", km: "·ûò·ûª·ûÅ·ûÑ·û∂·ûö·ûü·üÜ·ûÅ·û∂·ûì·üã·ûö·ûî·ûü·üã·ûé·û∫·ûö·üâ·ûº·ûì?" }, correct: "Transmit signals", options: ["Produce energy", "Transmit signals", "Store memory", "Digest food"] },
            { subject: "biology", q: { en: "Which system breaks down food?", km: "·ûî·üí·ûö·ûñ·üê·ûì·üí·ûí·ûé·û∂·ûö·üÜ·ûõ·û∂·ûô·û¢·û∂·û†·û∂·ûö?" }, correct: "Digestive", options: ["Respiratory", "Digestive", "Circulatory", "Nervous"] }
        ];

        // Main App Component
        function App() {
            const [lang, setLang] = useState('en');
            const [surveyComplete, setSurveyComplete] = useState(false);
            const [currentPage, setCurrentPage] = useState('survey');
            const [userData, setUserData] = useState({
                strengths: [],
                weaknesses: [],
                targetGrade: '',
                monthsLeft: ''
            });
            const [xp, setXp] = useState(0);
            const [level, setLevel] = useState(1);
            const [streak, setStreak] = useState(3);
            const [tasksCompleted, setTasksCompleted] = useState({
                lesson: false,
                practice: false,
                flashcards: false,
                challenge: false
            });
            const [currentLesson, setCurrentLesson] = useState(null);
            const [flashcardProgress, setFlashcardProgress] = useState({});
            const [practiceHistory, setPracticeHistory] = useState([]);
            const [examResults, setExamResults] = useState([]);

            const t = translations[lang];

            useEffect(() => {
                const saved = localStorage.getItem('bacStudyData');
                if (saved) {
                    const data = JSON.parse(saved);
                    setSurveyComplete(data.surveyComplete || false);
                    setUserData(data.userData || userData);
                    setXp(data.xp || 0);
                    setLevel(data.level || 1);
                    setStreak(data.streak || 3);
                    setTasksCompleted(data.tasksCompleted || tasksCompleted);
                    setFlashcardProgress(data.flashcardProgress || {});
                    setPracticeHistory(data.practiceHistory || []);
                    setExamResults(data.examResults || []);
                    if (data.surveyComplete) {
                        setCurrentPage('home');
                    }
                }
            }, []);

            useEffect(() => {
                const dataToSave = {
                    surveyComplete,
                    userData,
                    xp,
                    level,
                    streak,
                    tasksCompleted,
                    flashcardProgress,
                    practiceHistory,
                    examResults
                };
                localStorage.setItem('bacStudyData', JSON.stringify(dataToSave));
            }, [surveyComplete, userData, xp, level, streak, tasksCompleted, flashcardProgress, practiceHistory, examResults]);

            const completeSurvey = (data) => {
                setUserData(data);
                setSurveyComplete(true);
                setCurrentPage('roadmap');
            };

            const completeTask = (task) => {
                if (!tasksCompleted[task]) {
                    setTasksCompleted({...tasksCompleted, [task]: true});
                    setXp(xp + 20);
                    if ((xp + 20) >= level * 100) {
                        setLevel(level + 1);
                    }
                }
            };

            const getDaysUntilBac = () => {
                return parseInt(userData.monthsLeft) * 30 || 150;
            };

            const getStudyHours = () => {
                const gradeMap = { 'A': 3.5, 'B': 2.5, 'C': 1.75, 'D': 1.25, 'E': 1 };
                return gradeMap[userData.targetGrade] || 2;
            };

            const handleLessonClick = (lessonId) => {
                setCurrentLesson(lessonId);
                setCurrentPage('lesson-detail');
            };

            // Make handler and user data globally available
            useEffect(() => {
                window.handleLessonClick = handleLessonClick;
                window.userWeaknesses = userData.weaknesses || [];
            }, [userData.weaknesses]);

            return (
                <div className="app-container">
                    {!surveyComplete ? (
                        <SurveyPage lang={lang} setLang={setLang} onComplete={completeSurvey} t={t} />
                    ) : (
                        <>
                            {currentPage === 'roadmap' && (
                                <RoadmapPage 
                                    lang={lang} 
                                    userData={userData} 
                                    studyHours={getStudyHours()}
                                    onContinue={() => setCurrentPage('home')}
                                    t={t}
                                />
                            )}
                            {currentPage === 'home' && (
                                <HomePage 
                                    lang={lang}
                                    setLang={setLang}
                                    xp={xp}
                                    level={level}
                                    streak={streak}
                                    daysLeft={getDaysUntilBac()}
                                    tasksCompleted={tasksCompleted}
                                    completeTask={completeTask}
                                    onViewRoadmap={() => setCurrentPage('roadmap')}
                                    t={t}
                                />
                            )}
                            {currentPage === 'lessons' && (
                                <LessonsPage 
                                    lang={lang}
                                    setCurrentLesson={setCurrentLesson}
                                    setCurrentPage={setCurrentPage}
                                    t={t}
                                />
                            )}
                            {currentPage === 'lesson-detail' && currentLesson && (
                                <LessonDetailPage 
                                    lang={lang}
                                    lesson={currentLesson}
                                    onBack={() => setCurrentPage('home')}
                                    onComplete={() => completeTask('lesson')}
                                    t={t}
                                />
                            )}
                            {currentPage === 'donate' && (
                                <DonatePage lang={lang} t={t} />
                            )}
                            {currentPage === 'chat' && (
                                <ChatPage lang={lang} t={t} />
                            )}
                            {currentPage === 'leaderboard' && (
                                <LeaderboardPage 
                                    lang={lang}
                                    currentXp={xp}
                                    currentLevel={level}
                                    currentStreak={streak}
                                    t={t}
                                />
                            )}
                            {currentPage === 'progress' && (
                                <ProgressPage 
                                    lang={lang}
                                    xp={xp}
                                    level={level}
                                    streak={streak}
                                    tasksCompleted={tasksCompleted}
                                    practiceHistory={practiceHistory}
                                    userData={userData}
                                    t={t}
                                />
                            )}
                            {currentPage === 'mockexam' && (
                                <MockExamPage 
                                    lang={lang}
                                    examResults={examResults}
                                    setExamResults={setExamResults}
                                    setXp={setXp}
                                    xp={xp}
                                    t={t}
                                />
                            )}
                            
                            {currentPage !== 'roadmap' && currentPage !== 'lesson-detail' && (
                                <TabBar currentPage={currentPage} setCurrentPage={setCurrentPage} t={t} />
                            )}
                        </>
                    )}
                </div>
            );
        }

        // Survey Page Component
        function SurveyPage({ lang, setLang, onComplete, t }) {
            const [step, setStep] = useState(1);
            const [formData, setFormData] = useState({
                strengths: [],
                weaknesses: [],
                targetGrade: '',
                monthsLeft: ''
            });

            const subjects = ['math', 'biology', 'chemistry', 'physics', 'history', 'english'];

            const toggleSubject = (field, subject) => {
                const current = formData[field];
                if (current.includes(subject)) {
                    setFormData({...formData, [field]: current.filter(s => s !== subject)});
                } else {
                    setFormData({...formData, [field]: [...current, subject]});
                }
            };

            const handleSubmit = () => {
                onComplete(formData);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-600 to-indigo-700 p-6 flex flex-col">
                    <div className="flex justify-end mb-4">
                        <button 
                            onClick={() => setLang(lang === 'en' ? 'km' : 'en')}
                            className="bg-white/20 text-white px-4 py-2 rounded-full text-sm font-medium"
                        >
                            {lang === 'en' ? 'üá∞üá≠ ·ûó·û∂·ûü·û∂·ûÅ·üí·ûò·üÇ·ûö' : 'üá¨üáß English'}
                        </button>
                    </div>

                    <div className="flex-1 flex flex-col justify-center animate-slide-up">
                        <div className="text-center mb-8">
                            <h1 className="bangers text-5xl text-white mb-2 animate-bounce">
                                {t.welcome}
                            </h1>
                            <h2 className="text-3xl font-bold text-yellow-300 mb-4">
                                {t.bacStudy}
                            </h2>
                            <p className="text-white/90 text-lg">
                                {t.surveyIntro}
                            </p>
                        </div>

                        <div className="bg-white rounded-3xl p-6 shadow-2xl">
                            {step === 1 && (
                                <div className="animate-fade-in">
                                    <h3 className="text-xl font-bold text-gray-800 mb-4">
                                        {t.strengths}
                                    </h3>
                                    <div className="grid grid-cols-2 gap-3 mb-6">
                                        {subjects.map(sub => (
                                            <button
                                                key={sub}
                                                onClick={() => toggleSubject('strengths', sub)}
                                                className={`py-3 rounded-xl font-medium transition-all ${
                                                    formData.strengths.includes(sub)
                                                        ? 'bg-green-500 text-white shadow-lg scale-105'
                                                        : 'bg-gray-100 text-gray-700'
                                                }`}
                                            >
                                                {t[sub]}
                                            </button>
                                        ))}
                                    </div>
                                    <button
                                        onClick={() => setStep(2)}
                                        disabled={formData.strengths.length === 0}
                                        className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-xl font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed"
                                    >
                                        Next ‚Üí
                                    </button>
                                </div>
                            )}

                            {step === 2 && (
                                <div className="animate-fade-in">
                                    <h3 className="text-xl font-bold text-gray-800 mb-4">
                                        {t.weaknesses}
                                    </h3>
                                    <div className="grid grid-cols-2 gap-3 mb-6">
                                        {subjects.map(sub => (
                                            <button
                                                key={sub}
                                                onClick={() => toggleSubject('weaknesses', sub)}
                                                className={`py-3 rounded-xl font-medium transition-all ${
                                                    formData.weaknesses.includes(sub)
                                                        ? 'bg-red-500 text-white shadow-lg scale-105'
                                                        : 'bg-gray-100 text-gray-700'
                                                }`}
                                            >
                                                {t[sub]}
                                            </button>
                                        ))}
                                    </div>
                                    <div className="flex gap-3">
                                        <button
                                            onClick={() => setStep(1)}
                                            className="flex-1 bg-gray-300 text-gray-700 py-4 rounded-xl font-bold"
                                        >
                                            ‚Üê Back
                                        </button>
                                        <button
                                            onClick={() => setStep(3)}
                                            disabled={formData.weaknesses.length === 0}
                                            className="flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-xl font-bold disabled:opacity-50"
                                        >
                                            Next ‚Üí
                                        </button>
                                    </div>
                                </div>
                            )}

                            {step === 3 && (
                                <div className="animate-fade-in">
                                    <h3 className="text-xl font-bold text-gray-800 mb-4">
                                        {t.targetGrade}
                                    </h3>
                                    <div className="grid grid-cols-5 gap-3 mb-6">
                                        {['A', 'B', 'C', 'D', 'E'].map(grade => (
                                            <button
                                                key={grade}
                                                onClick={() => setFormData({...formData, targetGrade: grade})}
                                                className={`py-4 rounded-xl font-bold text-xl transition-all ${
                                                    formData.targetGrade === grade
                                                        ? 'bg-blue-500 text-white shadow-lg scale-110'
                                                        : 'bg-gray-100 text-gray-700'
                                                }`}
                                            >
                                                {grade}
                                            </button>
                                        ))}
                                    </div>
                                    <div className="flex gap-3">
                                        <button
                                            onClick={() => setStep(2)}
                                            className="flex-1 bg-gray-300 text-gray-700 py-4 rounded-xl font-bold"
                                        >
                                            ‚Üê Back
                                        </button>
                                        <button
                                            onClick={() => setStep(4)}
                                            disabled={!formData.targetGrade}
                                            className="flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-xl font-bold disabled:opacity-50"
                                        >
                                            Next ‚Üí
                                        </button>
                                    </div>
                                </div>
                            )}

                            {step === 4 && (
                                <div className="animate-fade-in">
                                    <h3 className="text-xl font-bold text-gray-800 mb-4">
                                        {t.monthsLeft}
                                    </h3>
                                    <div className="grid grid-cols-3 gap-3 mb-6">
                                        {['1', '2', '3', '4', '5', '6'].map(month => (
                                            <button
                                                key={month}
                                                onClick={() => setFormData({...formData, monthsLeft: month})}
                                                className={`py-4 rounded-xl font-bold text-lg transition-all ${
                                                    formData.monthsLeft === month
                                                        ? 'bg-orange-500 text-white shadow-lg scale-110'
                                                        : 'bg-gray-100 text-gray-700'
                                                }`}
                                            >
                                                {month}
                                            </button>
                                        ))}
                                    </div>
                                    <div className="flex gap-3">
                                        <button
                                            onClick={() => setStep(3)}
                                            className="flex-1 bg-gray-300 text-gray-700 py-4 rounded-xl font-bold"
                                        >
                                            ‚Üê Back
                                        </button>
                                        <button
                                            onClick={handleSubmit}
                                            disabled={!formData.monthsLeft}
                                            className="flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-4 rounded-xl font-bold disabled:opacity-50 animate-pulse"
                                        >
                                            {t.generateRoadmap} ‚ú®
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        // Roadmap Page Component
        function RoadmapPage({ lang, userData, studyHours, onContinue, t }) {
            const phases = [
                { 
                    month: `${t.month || 'Month'} 1-2`, 
                    title: lang === 'en' ? 'Fix Math foundations' : '·ûá·ûΩ·ûü·ûá·ûª·ûõ·ûÇ·üí·ûö·ûπ·üá·ûÇ·ûé·û∑·ûè·ûú·û∑·ûë·üí·ûô·û∂',
                    icon: 'üìê'
                },
                { 
                    month: `${t.month || 'Month'} 3`, 
                    title: lang === 'en' ? 'Biology deep dive' : '·ûü·üä·û∏·ûá·ûò·üí·ûö·üÖ·ûá·û∏·ûú·ûú·û∑·ûë·üí·ûô·û∂',
                    icon: 'üß¨'
                },
                { 
                    month: `${t.month || 'Month'} 4`, 
                    title: lang === 'en' ? 'Mixed practice all subjects' : '·û¢·ûì·ûª·ûú·ûè·üí·ûè·ûõ·û∂·ûô·ûò·ûª·ûÅ·ûú·û∑·ûá·üí·ûá·û∂·ûë·û∂·üÜ·ûÑ·û¢·ûü·üã',
                    icon: 'üìö'
                },
                { 
                    month: `${t.month || 'Month'} 5`, 
                    title: lang === 'en' ? 'Exam simulation & weak areas' : '·ûî·üí·ûö·û°·ûÑ·ûñ·û∑·ûü·üÑ·ûí·ûì·üç & ·ûè·üÜ·ûî·ûì·üã·ûÅ·üí·ûü·üÑ·ûô',
                    icon: 'üéØ'
                }
            ];

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 p-6 flex flex-col">
                    <div className="animate-slide-up">
                        <h1 className="bangers text-4xl text-white text-center mb-6 animate-bounce">
                            {t.yourRoadmap} üéì
                        </h1>

                        <div className="bg-white rounded-3xl p-6 shadow-2xl mb-6">
                            <div className="text-center mb-6">
                                <div className="inline-block bg-gradient-to-r from-green-400 to-emerald-500 text-white px-6 py-3 rounded-full font-bold text-lg animate-pulse">
                                    {t.targetGrade || 'Target Grade'}: {userData.targetGrade} | {userData.monthsLeft} {lang === 'en' ? 'months left' : '·ûÅ·üÇ·ûì·üÖ·ûü·ûõ·üã'}
                                </div>
                            </div>

                            <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-5 mb-6">
                                <h3 className="font-bold text-gray-800 mb-3 text-lg">
                                    ‚è∞ {t.recommendedTime}
                                </h3>
                                <div className="text-center">
                                    <div className="text-5xl font-black gradient-text mb-2">
                                        {studyHours}
                                    </div>
                                    <div className="text-gray-600 font-medium">
                                        {t.hoursPerDay}
                                    </div>
                                    <div className="text-sm text-gray-500 mt-2">
                                        {t.basedOn}
                                    </div>
                                </div>
                            </div>

                            <div className="mb-4">
                                <h3 className="font-bold text-gray-800 mb-4 text-lg">
                                    üó∫Ô∏è {t.roadmapPhases}
                                </h3>
                                <div className="space-y-3">
                                    {phases.map((phase, idx) => (
                                        <div 
                                            key={idx} 
                                            className="bg-white border-2 border-purple-200 rounded-xl p-4 flex items-center gap-3 animate-slide-up"
                                            style={{animationDelay: `${idx * 0.1}s`}}
                                        >
                                            <div className="text-3xl">{phase.icon}</div>
                                            <div>
                                                <div className="font-bold text-purple-600">{phase.month}</div>
                                                <div className="text-gray-700">{phase.title}</div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>

                        <button
                            onClick={onContinue}
                            className="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-5 rounded-2xl font-bold text-xl shadow-xl animate-pulse"
                        >
                            {t.studyNow} üöÄ
                        </button>
                    </div>
                </div>
            );
        }

        // Home Page Component
        function HomePage({ lang, setLang, xp, level, streak, daysLeft, tasksCompleted, completeTask, onViewRoadmap, t }) {
            const allTasksComplete = Object.values(tasksCompleted).every(v => v);
            const motivationQuotes = {
                en: [
                    "Success is the sum of small efforts repeated day in and day out.",
                    "The expert in anything was once a beginner.",
                    "Study hard now, celebrate later!",
                    "Your future self will thank you for today's effort."
                ],
                km: [
                    "·ûó·û∂·ûñ·ûá·üÑ·ûÇ·ûá·üê·ûô·ûÇ·û∫·ûá·û∂·ûï·ûõ·ûî·ûº·ûÄ·ûì·üÉ·ûÄ·û∂·ûö·ûÅ·û∑·ûè·ûÅ·üÜ·ûè·ûº·ûÖ·üó·ûä·üÇ·ûõ·ûí·üí·ûú·ûæ·ûò·üí·ûè·ûÑ·û†·ûæ·ûô·ûò·üí·ûè·ûÑ·ûë·üÄ·ûè·üî",
                    "·û¢·üí·ûì·ûÄ·ûá·üÜ·ûì·û∂·ûâ·ûÄ·üí·ûì·ûª·ûÑ·û¢·üí·ûú·û∏·ûò·ûΩ·ûô·ûí·üí·ûõ·û∂·ûî·üã·ûá·û∂·û¢·üí·ûì·ûÄ·ûÖ·û∂·ûî·üã·ûï·üí·ûè·ûæ·ûò·üî",
                    "·ûî·üí·ûö·ûπ·ûÑ·ûü·û∑·ûÄ·üí·ûü·û∂·û•·û°·ûº·ûú ·û¢·ûî·û¢·ûö·ûì·üÖ·ûñ·üÅ·ûõ·ûÄ·üí·ûö·üÑ·ûô!",
                    "·ûÅ·üí·ûõ·ûΩ·ûì·ûØ·ûÑ·û¢·ûì·û∂·ûÇ·ûè·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ·ûì·ûπ·ûÑ·ûê·üí·ûõ·üÇ·ûÑ·û¢·üÜ·ûé·ûö·ûÇ·ûª·ûé·ûÖ·üÜ·ûñ·üÑ·üá·ûÄ·û∂·ûö·ûÅ·û∑·ûè·ûÅ·üÜ·ûê·üí·ûÑ·üÉ·ûì·üÅ·üá·üî"
                ]
            };
            const randomQuote = motivationQuotes[lang][Math.floor(Math.random() * motivationQuotes[lang].length)];

            // Get weaknesses from parent via props
            const userWeaknesses = window.userWeaknesses || [];
            
            const lessonCards = [];
            
            // Add foundation lessons if user has weaknesses
            if (userWeaknesses.includes('math')) {
                lessonCards.push({ 
                    id: 'math-foundation', 
                    title: foundationLessons.math.title[lang], 
                    icon: 'üî¢', 
                    category: `${t.math} - ${lang === 'en' ? 'Foundation' : '·ûÇ·üí·ûö·ûπ·üá'}`, 
                    color: 'from-orange-500 to-red-600', 
                    progress: 0,
                    importance: '95%',
                    isFoundation: true
                });
            }
            
            // Regular math lessons
            lessonCards.push(
                { id: 'math-limits', title: lessonsData.math.limits.title[lang], icon: 'üìê', category: t.math, color: 'from-blue-500 to-indigo-600', progress: 0, importance: '85%' },
                { id: 'math-probability', title: lessonsData.math.probability.title[lang], icon: 'üé≤', category: t.math, color: 'from-cyan-500 to-blue-600', progress: 0, importance: '40%' }
            );
            
            // Add biology foundation if needed
            if (userWeaknesses.includes('biology')) {
                lessonCards.push({ 
                    id: 'biology-foundation', 
                    title: foundationLessons.biology.title[lang], 
                    icon: 'üß´', 
                    category: `${t.biology} - ${lang === 'en' ? 'Foundation' : '·ûÇ·üí·ûö·ûπ·üá'}`, 
                    color: 'from-lime-500 to-green-700', 
                    progress: 0,
                    importance: '95%',
                    isFoundation: true
                });
            }
            
            // Regular biology lessons
            lessonCards.push(
                { id: 'biology-body', title: lessonsData.biology.body.title[lang], icon: 'ü´Ä', category: t.biology, color: 'from-green-500 to-emerald-600', progress: 0, importance: '65%' },
                { id: 'biology-brain', title: lessonsData.biology.brain.title[lang], icon: 'üß†', category: t.biology, color: 'from-teal-500 to-green-600', progress: 0, importance: '55%' }
            );

            // This will be passed down from parent
            const handleLessonClick = window.handleLessonClick || (() => {});

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-24">
                    <div className="bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-b-3xl shadow-xl">
                        <div className="flex justify-between items-center mb-6">
                            <h1 className="bangers text-3xl text-white">BAC II HERO</h1>
                            <button 
                                onClick={() => setLang(lang === 'en' ? 'km' : 'en')}
                                className="bg-white/20 text-white px-3 py-1 rounded-full text-sm"
                            >
                                {lang === 'en' ? 'üá∞üá≠ KM' : 'üá¨üáß EN'}
                            </button>
                        </div>

                        <div className="grid grid-cols-3 gap-3 mb-4">
                            <div className="bg-white/20 backdrop-blur-lg rounded-xl p-3 text-center">
                                <div className="text-yellow-300 text-2xl font-black">{daysLeft}</div>
                                <div className="text-white/90 text-xs">{t.daysLeft}</div>
                            </div>
                            <div className="bg-white/20 backdrop-blur-lg rounded-xl p-3 text-center">
                                <div className="text-yellow-300 text-2xl font-black">{streak} üî•</div>
                                <div className="text-white/90 text-xs">{t.currentStreak}</div>
                            </div>
                            <div className="bg-white/20 backdrop-blur-lg rounded-xl p-3 text-center">
                                <div className="text-yellow-300 text-2xl font-black">Lv {level}</div>
                                <div className="text-white/90 text-xs">{xp} XP</div>
                            </div>
                        </div>

                        <div className="bg-white/10 backdrop-blur-lg rounded-xl p-4">
                            <div className="text-white/90 text-xs mb-2">{t.motivationQuote}</div>
                            <div className="text-white font-medium italic text-sm">"{randomQuote}"</div>
                        </div>
                    </div>

                    <div className="p-6">
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="text-xl font-bold text-gray-800">{t.lessons}</h2>
                            <button 
                                onClick={onViewRoadmap}
                                className="text-purple-600 text-sm font-medium"
                            >
                                üó∫Ô∏è Roadmap
                            </button>
                        </div>

                        <div className="space-y-3">
                            {lessonCards.map((lesson) => (
                                <LessonCard 
                                    key={lesson.id}
                                    lesson={lesson}
                                    onClick={() => handleLessonClick(lesson.id)}
                                    t={t}
                                />
                            ))}
                        </div>

                        <div className="bg-white rounded-2xl shadow-lg p-5 mt-6">
                            <h2 className="font-bold text-gray-800 mb-3 flex items-center gap-2">
                                <span className="text-2xl">üìã</span> {t.todayChallenge}
                            </h2>
                            {!allTasksComplete ? (
                                <div className="space-y-3">
                                    <p className="text-sm text-gray-600 mb-3">{t.todaysPlan}</p>
                                    <TaskItem 
                                        completed={tasksCompleted.lesson}
                                        icon="üìñ"
                                        text={`${t.completeLesson}`}
                                        onClick={() => completeTask('lesson')}
                                    />
                                    <TaskItem 
                                        completed={tasksCompleted.practice}
                                        icon="‚úçÔ∏è"
                                        text={`${t.practice}`}
                                        onClick={() => completeTask('practice')}
                                    />
                                    <TaskItem 
                                        completed={tasksCompleted.flashcards}
                                        icon="üé¥"
                                        text={`${t.reviewCards}`}
                                        onClick={() => completeTask('flashcards')}
                                    />
                                    <TaskItem 
                                        completed={tasksCompleted.challenge}
                                        icon="üéØ"
                                        text={t.dailyChallengeTask}
                                        onClick={() => completeTask('challenge')}
                                    />
                                </div>
                            ) : (
                                <div className="text-center py-6">
                                    <div className="text-6xl mb-3 animate-bounce">üéâ</div>
                                    <div className="font-bold text-green-600 text-lg">{t.completedMsg}</div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        function TaskItem({ completed, icon, text, onClick }) {
            return (
                <div
                    onClick={!completed ? onClick : null}
                    className={`flex items-center gap-3 p-3 rounded-xl border-2 transition-all cursor-pointer ${
                        completed 
                            ? 'bg-green-50 border-green-300' 
                            : 'bg-gray-50 border-gray-200 hover:border-purple-300'
                    }`}
                >
                    <div className="text-2xl">{completed ? '‚úÖ' : icon}</div>
                    <div className={`flex-1 font-medium ${completed ? 'text-green-700 line-through' : 'text-gray-700'}`}>
                        {text}
                    </div>
                </div>
            );
        }

        // Lessons Page Component
        function LessonsPage({ lang, setCurrentLesson, setCurrentPage, t }) {
            const lessons = [
                { id: 'math-limits', category: 'math', title: lessonsData.math.limits.title[lang], importance: '85%', icon: 'üìê' },
                { id: 'math-probability', category: 'math', title: lessonsData.math.probability.title[lang], importance: '40%', icon: 'üé≤' },
                { id: 'biology-body', category: 'biology', title: lessonsData.biology.body.title[lang], importance: '65%', icon: 'ü´Ä' },
                { id: 'biology-brain', category: 'biology', title: lessonsData.biology.brain.title[lang], importance: '70%', icon: 'üß†' }
            ];

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-24">
                    <div className="bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-b-3xl shadow-xl mb-6">
                        <h1 className="bangers text-3xl text-white text-center">{t.lessons} üìö</h1>
                    </div>

                    <div className="p-6 space-y-6">
                        <div>
                            <h2 className="font-bold text-xl text-gray-800 mb-3 flex items-center gap-2">
                                <span className="text-2xl">üìê</span> {t.math}
                            </h2>
                            <div className="space-y-3">
                                {lessons.filter(l => l.category === 'math').map(lesson => (
                                    <LessonCard 
                                        key={lesson.id}
                                        lesson={lesson}
                                        onClick={() => {
                                            setCurrentLesson(lesson.id);
                                            setCurrentPage('lesson-detail');
                                        }}
                                        t={t}
                                    />
                                ))}
                            </div>
                        </div>

                        <div>
                            <h2 className="font-bold text-xl text-gray-800 mb-3 flex items-center gap-2">
                                <span className="text-2xl">üß¨</span> {t.biology}
                            </h2>
                            <div className="space-y-3">
                                {lessons.filter(l => l.category === 'biology').map(lesson => (
                                    <LessonCard 
                                        key={lesson.id}
                                        lesson={lesson}
                                        onClick={() => {
                                            setCurrentLesson(lesson.id);
                                            setCurrentPage('lesson-detail');
                                        }}
                                        t={t}
                                    />
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function LessonCard({ lesson, onClick, t }) {
            return (
                <div
                    onClick={onClick}
                    className="bg-white rounded-xl p-4 shadow-md border-2 border-gray-100 hover:border-purple-300 cursor-pointer transition-all hover:scale-102"
                >
                    <div className="flex items-center gap-4">
                        <div className="text-4xl">{lesson.icon}</div>
                        <div className="flex-1">
                            <h3 className="font-bold text-gray-800">{lesson.title}</h3>
                            <div className="text-sm text-orange-600 font-medium">
                                {t.importanceNote}: {lesson.importance}
                            </div>
                        </div>
                        <div className="text-purple-500 text-2xl">‚Üí</div>
                    </div>
                </div>
            );
        }

        // Mimo-Style Lesson Page Component (with integrated flashcards & quiz)
        function LessonDetailPage({ lang, lesson, onBack, onComplete, t }) {
            const [step, setStep] = useState(0); // Track progress through lesson
            const [showAnswer, setShowAnswer] = useState(false);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [score, setScore] = useState(0);

            const getLessonData = () => {
                // Check if it's a foundation lesson
                if (lesson === 'math-foundation') {
                    return foundationLessons.math;
                }
                if (lesson === 'biology-foundation') {
                    return foundationLessons.biology;
                }
                
                // Regular lessons
                const parts = lesson.split('-');
                const category = parts[0];
                const topic = parts[1];
                
                if (category === 'math') {
                    return lessonsData.math[topic === 'limits' ? 'limits' : 'probability'];
                } else {
                    return lessonsData.biology[topic === 'body' ? 'body' : 'brain'];
                }
            };

            const lessonData = getLessonData();
            
            // Get related flashcards and practice questions
            const category = lesson.includes('foundation') ? lesson.split('-')[0] : lesson.split('-')[0];
            const topic = lesson.includes('foundation') ? 'foundation' : lesson.split('-')[1];
            
            const relatedFlashcards = flashcardsData[category]?.filter(card => 
                card.topic === topic
            ) || [];
            const relatedQuestions = practiceData[category] || [];

            // Build lesson steps: intro ‚Üí content ‚Üí flashcard ‚Üí content ‚Üí quiz ‚Üí completion
            const totalSteps = 7;

            const renderStep = () => {
                // Step 0: Introduction
                if (step === 0) {
                    return (
                        <div className="text-center animate-slide-up">
                            <div className="text-7xl mb-6 animate-bounce">{lesson.includes('math') ? 'üìê' : 'üß¨'}</div>
                            <h2 className="text-3xl font-black text-gray-800 mb-4">{lessonData.title[lang]}</h2>
                            <div className="bg-orange-50 border-2 border-orange-300 rounded-2xl p-4 mb-6">
                                <div className="text-orange-800 font-bold mb-1">{t.importanceNote}</div>
                                <div className="text-orange-900 text-2xl font-black">{lessonData.importance}</div>
                            </div>
                            <p className="text-gray-600 mb-8">{lang === 'en' ? 'Let\'s learn this step by step!' : '·ûè·üÑ·üá·ûö·üÄ·ûì·ûÇ·üí·ûì·û∂·ûá·û∂·ûá·üÜ·û†·û∂·ûì!'}</p>
                            <button
                                onClick={() => setStep(1)}
                                className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-5 rounded-2xl font-bold text-lg shadow-xl"
                            >
                                {lang === 'en' ? 'Start Learning' : '·ûÖ·û∂·ûî·üã·ûï·üí·ûè·ûæ·ûò·ûö·üÄ·ûì'} üöÄ
                            </button>
                        </div>
                    );
                }

                // Step 1: Main Content
                if (step === 1) {
                    return (
                        <div className="animate-slide-up">
                            <h3 className="text-2xl font-bold text-gray-800 mb-4">üìñ {lang === 'en' ? 'Lesson' : '·ûò·üÅ·ûö·üÄ·ûì'}</h3>
                            <div className="bg-white rounded-2xl p-6 shadow-lg mb-4">
                                <p className="text-gray-700 leading-relaxed text-lg">{lessonData.content[lang]}</p>
                            </div>
                            <div className="bg-blue-50 border-2 border-blue-300 rounded-2xl p-5 shadow-lg">
                                <h4 className="font-bold text-blue-800 mb-2 flex items-center gap-2">
                                    <span className="text-xl">üìù</span> {t.summary}
                                </h4>
                                <p className="text-blue-900">{lessonData.summary[lang]}</p>
                            </div>
                            <button
                                onClick={() => setStep(2)}
                                className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-2xl font-bold mt-6"
                            >
                                {lang === 'en' ? 'Continue' : '·ûî·ûì·üí·ûè'} ‚Üí
                            </button>
                        </div>
                    );
                }

                // Step 2: Flashcard Practice with flip animation
                if (step === 2 && relatedFlashcards.length > 0) {
                    const currentCard = relatedFlashcards[0];
                    return (
                        <div className="animate-slide-up">
                            <div className="text-center mb-4">
                                <h3 className="text-xl font-bold text-gray-800">üé¥ {lang === 'en' ? 'Quick Check' : '·ûñ·û∑·ûì·û∑·ûè·üí·ûô·ûö·û†·üê·ûü'}</h3>
                                <p className="text-sm text-gray-600">{lang === 'en' ? 'Tap card to flip' : '·ûÖ·ûª·ûÖ·ûÄ·û∂·ûè·ûä·ûæ·ûò·üí·ûî·û∏·ûè·üí·ûö·û°·ûî·üã'}</p>
                            </div>
                            
                            <div 
                                onClick={() => setShowAnswer(!showAnswer)}
                                className="relative cursor-pointer"
                                style={{ perspective: '1000px', minHeight: '350px' }}
                            >
                                <div 
                                    className={`relative w-full transition-transform duration-500`}
                                    style={{ 
                                        transformStyle: 'preserve-3d',
                                        transform: showAnswer ? 'rotateY(180deg)' : 'rotateY(0deg)'
                                    }}
                                >
                                    {/* Front of card */}
                                    <div 
                                        className="absolute w-full bg-gradient-to-br from-purple-500 to-indigo-600 rounded-3xl shadow-2xl p-8 min-h-[350px] flex flex-col justify-center items-center text-center"
                                        style={{ 
                                            backfaceVisibility: 'hidden',
                                            WebkitBackfaceVisibility: 'hidden'
                                        }}
                                    >
                                        <div className="text-6xl mb-6">‚ùì</div>
                                        <div className="text-2xl font-bold text-white mb-4">
                                            {currentCard.q[lang]}
                                        </div>
                                        <div className="text-white/80 text-sm mt-4">
                                            üëÜ {lang === 'en' ? 'Tap to see answer' : '·ûÖ·ûª·ûÖ·ûä·ûæ·ûò·üí·ûî·û∏·ûò·ûæ·ûõ·ûÖ·ûò·üí·ûõ·ûæ·ûô'}
                                        </div>
                                    </div>

                                    {/* Back of card */}
                                    <div 
                                        className="absolute w-full bg-gradient-to-br from-green-500 to-emerald-600 rounded-3xl shadow-2xl p-8 min-h-[350px] flex flex-col justify-center items-center text-center"
                                        style={{ 
                                            backfaceVisibility: 'hidden',
                                            WebkitBackfaceVisibility: 'hidden',
                                            transform: 'rotateY(180deg)'
                                        }}
                                    >
                                        <div className="text-6xl mb-6">‚úÖ</div>
                                        <div className="text-2xl font-bold text-white mb-4">
                                            {currentCard.a[lang]}
                                        </div>
                                        <div className="text-white/80 text-sm mt-4">
                                            üëÜ {lang === 'en' ? 'Tap to flip back' : '·ûÖ·ûª·ûÖ·ûä·ûæ·ûò·üí·ûî·û∏·ûè·üí·ûö·û°·ûî·üã·ûÄ·üí·ûö·üÑ·ûô'}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <button
                                onClick={(e) => { 
                                    e.stopPropagation(); 
                                    setStep(3); 
                                    setShowAnswer(false); 
                                }}
                                className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-2xl font-bold mt-6"
                            >
                                {lang === 'en' ? 'Got it! Continue' : '·ûô·ûõ·üã·û†·ûæ·ûô! ·ûî·ûì·üí·ûè'} ‚Üí
                            </button>
                        </div>
                    );
                }

                // Step 3: Fun Fact
                if (step === 3 || (step === 2 && relatedFlashcards.length === 0)) {
                    return (
                        <div className="animate-slide-up">
                            <div className="bg-yellow-50 border-2 border-yellow-300 rounded-2xl p-6 shadow-lg mb-4">
                                <h3 className="font-bold text-yellow-800 mb-3 flex items-center gap-2 text-xl">
                                    <span className="text-2xl">üéØ</span> {t.funFact}
                                </h3>
                                <p className="text-yellow-900 text-lg">{lessonData.funFact[lang]}</p>
                            </div>
                            <div className="bg-purple-50 border-2 border-purple-300 rounded-2xl p-6 shadow-lg">
                                <h3 className="font-bold text-purple-800 mb-3 flex items-center gap-2 text-xl">
                                    <span className="text-2xl">üí°</span> {t.surpriseTip}
                                </h3>
                                <p className="text-purple-900 text-lg">{lessonData.tip[lang]}</p>
                            </div>
                            <button
                                onClick={() => setStep(4)}
                                className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-2xl font-bold mt-6"
                            >
                                {lang === 'en' ? 'Continue' : '·ûî·ûì·üí·ûè'} ‚Üí
                            </button>
                        </div>
                    );
                }

                // Step 4: Did You Know (if available)
                if (step === 4 && lessonData.didYouKnow) {
                    return (
                        <div className="animate-slide-up">
                            <div className="bg-green-50 border-2 border-green-300 rounded-2xl p-8 shadow-lg text-center">
                                <div className="text-5xl mb-4">üß†</div>
                                <h3 className="font-bold text-green-800 mb-4 text-2xl">{t.didYouKnow}</h3>
                                <p className="text-green-900 text-lg leading-relaxed">{lessonData.didYouKnow[lang]}</p>
                            </div>
                            <button
                                onClick={() => setStep(5)}
                                className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-2xl font-bold mt-6"
                            >
                                {lang === 'en' ? 'Ready for Quiz!' : '·ûö·ûΩ·ûÖ·ûö·û∂·ûõ·üã·ûü·ûò·üí·ûö·û∂·ûî·üã Quiz!'} üéØ
                            </button>
                        </div>
                    );
                }

                // Step 5: Quiz
                if (step === 5 || (step === 4 && !lessonData.didYouKnow)) {
                    const currentQ = relatedQuestions[0];
                    if (!currentQ) {
                        setStep(6);
                        return null;
                    }

                    return (
                        <div className="animate-slide-up">
                            <div className="text-center mb-4">
                                <h3 className="text-2xl font-bold text-gray-800">‚úçÔ∏è {lang === 'en' ? 'Practice Quiz' : 'Quiz ·û¢·ûì·ûª·ûú·ûè·üí·ûè'}</h3>
                                <p className="text-sm text-gray-600">{lang === 'en' ? 'Let\'s test what you learned!' : '·ûè·üÑ·üá·ûü·û∂·ûÄ·ûõ·üí·ûî·ûÑ·û¢·üí·ûú·û∏·ûä·üÇ·ûõ·ûî·û∂·ûì·ûö·üÄ·ûì!'}</p>
                            </div>

                            <div className="bg-white rounded-2xl shadow-xl p-6">
                                <div className="text-xl font-bold text-gray-800 mb-6">
                                    {currentQ.q[lang]}
                                </div>

                                <div className="space-y-3 mb-6">
                                    {currentQ.options.map((option, idx) => (
                                        <button
                                            key={idx}
                                            onClick={() => setSelectedAnswer(option)}
                                            disabled={selectedAnswer !== null}
                                            className={`w-full p-4 rounded-xl font-medium text-left transition-all ${
                                                selectedAnswer
                                                    ? option === currentQ.correct
                                                        ? 'bg-green-500 text-white'
                                                        : option === selectedAnswer
                                                        ? 'bg-red-500 text-white'
                                                        : 'bg-gray-100 text-gray-400'
                                                    : 'bg-gray-100 text-gray-700 hover:bg-purple-100 active:scale-95'
                                            }`}
                                        >
                                            {option}
                                        </button>
                                    ))}
                                </div>

                                {selectedAnswer && (
                                    <div className="bg-blue-50 border-2 border-blue-300 rounded-2xl p-4 mb-4 animate-fade-in">
                                        <div className="font-bold text-blue-800 mb-2">
                                            {selectedAnswer === currentQ.correct ? 'üéâ ' + (lang === 'en' ? 'Correct!' : '·ûè·üí·ûö·ûπ·ûò·ûè·üí·ûö·ûº·ûú!') : '‚ùå ' + (lang === 'en' ? 'Not quite' : '·ûò·û∑·ûì·ûò·üÇ·ûì')}
                                        </div>
                                        <div className="text-blue-900">{currentQ.explanation[lang]}</div>
                                    </div>
                                )}
                            </div>

                            {selectedAnswer && (
                                <button
                                    onClick={() => {
                                        if (selectedAnswer === currentQ.correct) setScore(score + 1);
                                        setStep(6);
                                        setSelectedAnswer(null);
                                    }}
                                    className="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-4 rounded-2xl font-bold mt-4"
                                >
                                    {lang === 'en' ? 'Continue' : '·ûî·ûì·üí·ûè'} ‚Üí
                                </button>
                            )}
                        </div>
                    );
                }

                // Step 6: Completion
                if (step === 6) {
                    onComplete();
                    return (
                        <div className="text-center animate-slide-up">
                            <div className="text-8xl mb-6 animate-bounce">üéâ</div>
                            <h2 className="text-3xl font-black gradient-text mb-4">
                                {lang === 'en' ? 'Lesson Complete!' : '·ûò·üÅ·ûö·üÄ·ûì·ûî·ûâ·üí·ûÖ·ûî·üã!'}
                            </h2>
                            <div className="bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-2xl p-6 mb-6">
                                <div className="text-5xl font-black mb-2">+20 XP</div>
                                <div className="text-lg">{lang === 'en' ? 'Experience Earned' : '·ûî·ûë·ûñ·û∑·ûü·üÑ·ûí·ûì·üç·ûë·ûë·ûΩ·ûõ·ûî·û∂·ûì'}</div>
                            </div>
                            <div className="bg-white rounded-2xl p-6 shadow-lg mb-6">
                                <div className="text-gray-600 mb-2">{lang === 'en' ? 'You mastered' : '·û¢·üí·ûì·ûÄ·ûî·û∂·ûì·ûè·üí·ûö·ûΩ·ûè·ûñ·û∑·ûì·û∑·ûè·üí·ûô'}</div>
                                <div className="text-2xl font-bold text-purple-600">{lessonData.title[lang]}</div>
                            </div>
                            <button
                                onClick={onBack}
                                className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-5 rounded-2xl font-bold text-lg shadow-xl"
                            >
                                {lang === 'en' ? 'Back to Lessons' : '·ûè·üí·ûö·ûõ·ûî·üã·ûë·üÖ·ûò·üÅ·ûö·üÄ·ûì'} üè†
                            </button>
                        </div>
                    );
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-24">
                    <div className="bg-gradient-to-r from-purple-600 to-indigo-700 p-6 sticky top-0 z-10 shadow-xl">
                        <div className="flex justify-between items-center mb-3">
                            <button onClick={onBack} className="text-white flex items-center gap-2">
                                ‚Üê {lang === 'en' ? 'Exit' : '·ûÖ·üÅ·ûâ'}
                            </button>
                            <div className="text-white text-sm">
                                {step} / {totalSteps - 1}
                            </div>
                        </div>
                        <div className="w-full bg-white/20 rounded-full h-2">
                            <div 
                                className="bg-white h-2 rounded-full transition-all"
                                style={{ width: `${(step / (totalSteps - 1)) * 100}%` }}
                            />
                        </div>
                    </div>

                    <div className="p-6">
                        {renderStep()}
                    </div>
                </div>
            );
        }

        // Donate Page Component
        function DonatePage({ lang, t }) {
            const [donated, setDonated] = useState(false);

            const topDonors = [
                { name: 'UNICEF Cambodia', amount: '$50,000', type: 'NGO' },
                { name: 'Sokha Tep', amount: '$5,000', type: 'Individual' },
                { name: 'ABA Bank', amount: '$25,000', type: 'Company' },
                { name: 'Ministry of Education', amount: '$100,000', type: 'Government' },
                { name: 'Dara Chan', amount: '$2,500', type: 'Individual' }
            ];

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-24">
                    <div className="bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-b-3xl shadow-xl mb-6">
                        <h1 className="bangers text-3xl text-white text-center mb-2">{t.donateTitle} üíù</h1>
                        <p className="text-white/90 text-center text-sm">{t.donateSubtitle}</p>
                    </div>

                    <div className="p-6 space-y-4">
                        {!donated ? (
                            <>
                                <button
                                    onClick={() => setDonated(true)}
                                    className="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white p-6 rounded-2xl font-bold text-lg shadow-xl flex items-center justify-between"
                                >
                                    <span>üíµ {t.moneyDonation}</span>
                                    <span className="text-3xl">‚Üí</span>
                                </button>
                                <button
                                    onClick={() => setDonated(true)}
                                    className="w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-6 rounded-2xl font-bold text-lg shadow-xl flex items-center justify-between"
                                >
                                    <span>üì∫ {t.watchAds}</span>
                                    <span className="text-3xl">‚Üí</span>
                                </button>
                            </>
                        ) : (
                            <div className="bg-white rounded-2xl p-8 shadow-xl text-center animate-slide-up">
                                <div className="text-6xl mb-4 animate-bounce">üéâ</div>
                                <h2 className="text-2xl font-bold text-green-600 mb-2">{t.thankYou}</h2>
                                <p className="text-gray-600">Your donation will help students achieve their dreams!</p>
                            </div>
                        )}

                        <div className="bg-white rounded-2xl p-6 shadow-xl">
                            <h2 className="font-bold text-xl text-gray-800 mb-4 flex items-center gap-2">
                                <span className="text-2xl">üèÜ</span> {t.topDonors}
                            </h2>
                            <div className="space-y-3">
                                {topDonors.map((donor, idx) => (
                                    <div key={idx} className="flex items-center gap-3 p-3 bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl">
                                        <div className="text-2xl font-black text-purple-600 w-8">#{idx + 1}</div>
                                        <div className="flex-1">
                                            <div className="font-bold text-gray-800">{donor.name}</div>
                                            <div className="text-sm text-gray-500">{donor.type}</div>
                                        </div>
                                        <div className="font-bold text-green-600">{donor.amount}</div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Chat Page Component
        function ChatPage({ lang, t }) {
            const [messages, setMessages] = useState([]);
            const [input, setInput] = useState('');

            const commonQuestions = [
                { q: lang === 'en' ? 'How do I calculate limits?' : '·ûè·ûæ·ûÇ·ûé·ûì·û∂·ûõ·û∏·ûò·û∏·ûè·ûô·üâ·û∂·ûÑ·ûä·ûº·ûÖ·ûò·üí·ûè·üÅ·ûÖ?', a: lang === 'en' ? 'To calculate limits, substitute the value into the function. If you get 0/0, try factoring or L\'H√¥pital\'s rule!' : '·ûä·ûæ·ûò·üí·ûî·û∏·ûÇ·ûé·ûì·û∂·ûõ·û∏·ûò·û∏·ûè ·ûá·üÜ·ûì·ûΩ·ûü·ûè·ûò·üí·ûõ·üÉ·ûë·üÖ·ûÄ·üí·ûì·ûª·ûÑ·û¢·ûì·ûª·ûÇ·ûò·ûì·üç·üî ·ûî·üí·ûö·ûü·û∑·ûì·ûî·ûæ·û¢·üí·ûì·ûÄ·ûë·ûë·ûΩ·ûõ·ûî·û∂·ûì 0/0 ·ûü·ûº·ûò·ûñ·üí·ûô·û∂·ûô·û∂·ûò·ûä·û∂·ûÄ·üã·ûÄ·ûè·üí·ûè·û∂ ·û¨·ûÖ·üí·ûî·û∂·ûî·üã L\'H√¥pital!' },
                { q: lang === 'en' ? 'What\'s the brain structure?' : '·ûè·ûæ·ûö·ûÖ·ûì·û∂·ûü·ûò·üí·ûñ·üê·ûì·üí·ûí·ûÅ·ûΩ·ûö·ûÄ·üí·ûî·û∂·ûõ·ûá·û∂·û¢·üí·ûú·û∏?', a: lang === 'en' ? 'The brain has 3 main parts: Cerebrum (thinking), Cerebellum (balance), and Brain stem (vital functions).' : '·ûÅ·ûΩ·ûö·ûÄ·üí·ûî·û∂·ûõ·ûò·û∂·ûì 3 ·ûï·üí·ûì·üÇ·ûÄ·ûü·üÜ·ûÅ·û∂·ûì·üã: ·ûü·üÅ·ûö·üÅ·ûî·üí·ûö·ûª·ûò (·ûÇ·üÜ·ûì·û∑·ûè), ·ûü·üÅ·ûö·üÅ·ûî·üÇ·ûõ (·ûè·ûª·ûõ·üí·ûô·ûó·û∂·ûñ), ·ûì·û∑·ûÑ·ûä·ûæ·ûò·ûÅ·ûΩ·ûö·ûÄ·üí·ûî·û∂·ûõ (·ûò·ûª·ûÅ·ûÑ·û∂·ûö·ûü·üÜ·ûÅ·û∂·ûì·üã)·üî' },
                { q: lang === 'en' ? 'How to improve my grade?' : '·ûè·ûæ·ûí·üí·ûú·ûæ·ûô·üâ·û∂·ûÑ·ûé·û∂·ûä·ûæ·ûò·üí·ûî·û∏·ûÄ·üÇ·ûõ·ûò·üí·û¢·ûñ·û∑·ûì·üí·ûë·ûª?', a: lang === 'en' ? 'Follow your daily plan, practice weak areas, and review with flashcards. Consistency is key!' : '·û¢·ûì·ûª·ûú·ûè·üí·ûè·ûè·û∂·ûò·ûï·üÇ·ûì·ûÄ·û∂·ûö·ûî·üí·ûö·ûÖ·û∂·üÜ·ûê·üí·ûÑ·üÉ·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ ·û¢·ûì·ûª·ûú·ûè·üí·ûè·ûè·üÜ·ûî·ûì·üã·ûÅ·üí·ûü·üÑ·ûô ·ûì·û∑·ûÑ·ûñ·û∑·ûì·û∑·ûè·üí·ûô·ûá·û∂·ûò·ûΩ·ûô·ûÄ·û∂·ûè·ûÖ·ûÑ·ûÖ·û∂·üÜ·üî ·ûó·û∂·ûñ·ûá·û∂·ûî·üã·ûõ·û∂·ûî·üã·ûÇ·û∫·ûá·û∂·ûü·üÑ!' }
            ];

            const handleSend = () => {
                if (!input.trim()) return;
                
                setMessages([...messages, { type: 'user', text: input }]);
                
                setTimeout(() => {
                    setMessages(prev => [...prev, { 
                        type: 'bot', 
                        text: t.noInternet 
                    }]);
                }, 500);
                
                setInput('');
            };

            const handleQuestionClick = (q, a) => {
                setMessages([
                    ...messages, 
                    { type: 'user', text: q },
                    { type: 'bot', text: a }
                ]);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-32">
                    <div className="bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-b-3xl shadow-xl mb-6">
                        <h1 className="bangers text-3xl text-white text-center">{t.aiCoach} ü§ñ</h1>
                    </div>

                    {messages.length === 0 ? (
                        <div className="p-6">
                            <div className="bg-white rounded-2xl p-6 shadow-lg mb-4">
                                <h3 className="font-bold text-gray-800 mb-4">{t.commonQuestions}</h3>
                                <div className="space-y-3">
                                    {commonQuestions.map((item, idx) => (
                                        <button
                                            key={idx}
                                            onClick={() => handleQuestionClick(item.q, item.a)}
                                            className="w-full text-left p-4 bg-purple-50 hover:bg-purple-100 rounded-xl border-2 border-purple-200 transition-all"
                                        >
                                            <div className="font-medium text-purple-800">{item.q}</div>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    ) : (
                        <div className="p-6 space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto">
                            {messages.map((msg, idx) => (
                                <div key={idx} className={`flex ${msg.type === 'user' ? 'justify-end' : 'justify-start'}`}>
                                    <div className={`max-w-[80%] p-4 rounded-2xl ${
                                        msg.type === 'user' 
                                            ? 'bg-purple-600 text-white' 
                                            : 'bg-white text-gray-800 shadow-md'
                                    }`}>
                                        {msg.text}
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}

                    <div className="fixed bottom-20 left-0 right-0 bg-white border-t-2 border-gray-200 p-4">
                        <div className="max-w-[430px] mx-auto flex gap-3">
                            <input
                                type="text"
                                value={input}
                                onChange={(e) => setInput(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && handleSend()}
                                placeholder={t.askQuestion}
                                className="flex-1 px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500"
                            />
                            <button
                                onClick={handleSend}
                                className="bg-purple-600 text-white px-6 py-3 rounded-xl font-bold"
                            >
                                {t.send}
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        // Leaderboard Page Component
        function LeaderboardPage({ lang, currentXp, currentLevel, currentStreak, t }) {
            const currentUser = { name: "You", xp: currentXp, level: currentLevel, streak: currentStreak, avatar: "‚≠ê" };
            const allUsers = [...leaderboardData, currentUser].sort((a, b) => b.xp - a.xp);
            const userRank = allUsers.findIndex(u => u.name === "You") + 1;

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-24">
                    <div className="bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-b-3xl shadow-xl mb-6">
                        <h1 className="bangers text-3xl text-white text-center">{t.leaderboard} üèÜ</h1>
                        <p className="text-white/90 text-center text-sm mt-2">{t.topStudents}</p>
                    </div>

                    <div className="p-6">
                        <div className="bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-2xl p-4 mb-6 shadow-xl">
                            <div className="text-center">
                                <div className="text-4xl mb-2">‚≠ê</div>
                                <div className="font-bold text-lg">{t.yourRank}</div>
                                <div className="text-3xl font-black">#{userRank}</div>
                            </div>
                        </div>

                        <div className="space-y-3">
                            {allUsers.map((user, idx) => (
                                <div 
                                    key={idx}
                                    className={`flex items-center gap-4 p-4 rounded-2xl shadow-lg ${
                                        user.name === "You" 
                                            ? 'bg-gradient-to-r from-purple-500 to-indigo-600 text-white' 
                                            : 'bg-white'
                                    }`}
                                >
                                    <div className={`text-2xl font-black w-10 ${
                                        idx === 0 ? 'text-yellow-500' : idx === 1 ? 'text-gray-400' : idx === 2 ? 'text-orange-600' : user.name === "You" ? 'text-white' : 'text-gray-400'
                                    }`}>
                                        #{idx + 1}
                                    </div>
                                    <div className="text-3xl">{user.avatar}</div>
                                    <div className="flex-1">
                                        <div className={`font-bold ${user.name === "You" ? 'text-white' : 'text-gray-800'}`}>
                                            {user.name}
                                        </div>
                                        <div className={`text-sm ${user.name === "You" ? 'text-white/80' : 'text-gray-500'}`}>
                                            Level {user.level} ‚Ä¢ {user.streak} üî•
                                        </div>
                                    </div>
                                    <div className={`font-black text-xl ${user.name === "You" ? 'text-yellow-300' : 'text-purple-600'}`}>
                                        {user.xp} XP
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        }

        // Progress Page Component
        function ProgressPage({ lang, xp, level, streak, tasksCompleted, practiceHistory, userData, t }) {
            const completedCount = Object.values(tasksCompleted).filter(v => v).length;
            const totalTasks = Object.keys(tasksCompleted).length;
            const completionRate = Math.round((completedCount / totalTasks) * 100);

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-24">
                    <div className="bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-b-3xl shadow-xl mb-6">
                        <h1 className="bangers text-3xl text-white text-center">{t.progress} üìä</h1>
                        <p className="text-white/90 text-center text-sm mt-2">{t.progressOverview}</p>
                    </div>

                    <div className="p-6 space-y-4">
                        <div className="grid grid-cols-2 gap-4">
                            <div className="bg-white rounded-2xl p-5 shadow-lg text-center">
                                <div className="text-3xl mb-2">‚ö°</div>
                                <div className="text-3xl font-black text-purple-600">{xp}</div>
                                <div className="text-sm text-gray-600">{t.totalXP}</div>
                            </div>
                            <div className="bg-white rounded-2xl p-5 shadow-lg text-center">
                                <div className="text-3xl mb-2">üî•</div>
                                <div className="text-3xl font-black text-orange-600">{streak}</div>
                                <div className="text-sm text-gray-600">{t.currentStreak}</div>
                            </div>
                        </div>

                        <div className="bg-white rounded-2xl p-6 shadow-lg">
                            <h3 className="font-bold text-gray-800 mb-4">{t.dailyPlan}</h3>
                            <div className="mb-4">
                                <div className="flex justify-between text-sm mb-2">
                                    <span className="text-gray-600">Completion</span>
                                    <span className="font-bold text-purple-600">{completionRate}%</span>
                                </div>
                                <div className="w-full bg-gray-200 rounded-full h-3">
                                    <div 
                                        className="bg-gradient-to-r from-purple-600 to-indigo-600 h-3 rounded-full transition-all"
                                        style={{ width: `${completionRate}%` }}
                                    />
                                </div>
                            </div>
                            <div className="grid grid-cols-2 gap-2">
                                {Object.entries(tasksCompleted).map(([key, done]) => (
                                    <div key={key} className={`p-3 rounded-xl text-center ${done ? 'bg-green-50 text-green-700' : 'bg-gray-50 text-gray-500'}`}>
                                        <div className="text-2xl mb-1">{done ? '‚úÖ' : '‚≠ï'}</div>
                                        <div className="text-xs font-medium capitalize">{key}</div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {practiceHistory.length > 0 && (
                            <div className="bg-white rounded-2xl p-6 shadow-lg">
                                <h3 className="font-bold text-gray-800 mb-4">{t.practiceScore}</h3>
                                <div className="space-y-3">
                                    {practiceHistory.slice(-5).reverse().map((result, idx) => {
                                        const percentage = Math.round((result.score / result.total) * 100);
                                        return (
                                            <div key={idx} className="border-b border-gray-100 pb-3 last:border-0">
                                                <div className="flex justify-between items-center mb-2">
                                                    <span className="font-medium text-gray-700">
                                                        {result.category === 'math' ? t.math : t.biology}
                                                    </span>
                                                    <span className={`font-bold ${percentage >= 70 ? 'text-green-600' : 'text-orange-600'}`}>
                                                        {percentage}%
                                                    </span>
                                                </div>
                                                <div className="w-full bg-gray-200 rounded-full h-2">
                                                    <div 
                                                        className={`h-2 rounded-full ${percentage >= 70 ? 'bg-green-500' : 'bg-orange-500'}`}
                                                        style={{ width: `${percentage}%` }}
                                                    />
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Mock Exam Page Component
        function MockExamPage({ lang, examResults, setExamResults, setXp, xp, t }) {
            const [examStarted, setExamStarted] = useState(false);
            const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
            const [answers, setAnswers] = useState({});
            const [examFinished, setExamFinished] = useState(false);

            const startExam = () => {
                setExamStarted(true);
                setCurrentQuestionIndex(0);
                setAnswers({});
                setExamFinished(false);
            };

            const handleAnswer = (questionIndex, answer) => {
                setAnswers({ ...answers, [questionIndex]: answer });
            };

            const submitExam = () => {
                let score = 0;
                mockExamData.forEach((q, idx) => {
                    if (answers[idx] === q.correct) score++;
                });
                
                const percentage = Math.round((score / mockExamData.length) * 100);
                const result = {
                    score,
                    total: mockExamData.length,
                    percentage,
                    date: new Date().toISOString()
                };
                
                setExamResults([...examResults, result]);
                setXp(xp + score * 20);
                setExamFinished(true);
            };

            if (!examStarted) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-24">
                        <div className="bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-b-3xl shadow-xl mb-6">
                            <h1 className="bangers text-3xl text-white text-center">{t.mockExam} üìù</h1>
                            <p className="text-white/90 text-center text-sm mt-2">Bac II Simulation</p>
                        </div>

                        <div className="p-6">
                            <div className="bg-white rounded-2xl p-8 shadow-xl text-center mb-6">
                                <div className="text-6xl mb-4">üéØ</div>
                                <h2 className="text-2xl font-bold text-gray-800 mb-4">{t.startMockExam}</h2>
                                <p className="text-gray-600 mb-6">{t.examInstructions}</p>
                                <div className="bg-purple-50 rounded-xl p-4 mb-6">
                                    <div className="text-4xl font-black text-purple-600 mb-1">{mockExamData.length}</div>
                                    <div className="text-gray-700">Questions</div>
                                </div>
                                <button
                                    onClick={startExam}
                                    className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-5 rounded-xl font-bold text-lg shadow-xl"
                                >
                                    {t.startMockExam} üöÄ
                                </button>
                            </div>

                            {examResults.length > 0 && (
                                <div className="bg-white rounded-2xl p-6 shadow-lg">
                                    <h3 className="font-bold text-gray-800 mb-4">Previous Results</h3>
                                    <div className="space-y-3">
                                        {examResults.slice(-3).reverse().map((result, idx) => (
                                            <div key={idx} className="flex justify-between items-center p-4 bg-purple-50 rounded-xl">
                                                <div>
                                                    <div className="font-bold text-gray-800">{result.score}/{result.total}</div>
                                                    <div className="text-sm text-gray-500">
                                                        {new Date(result.date).toLocaleDateString()}
                                                    </div>
                                                </div>
                                                <div className={`text-2xl font-black ${
                                                    result.percentage >= 80 ? 'text-green-600' : 
                                                    result.percentage >= 60 ? 'text-yellow-600' : 'text-red-600'
                                                }`}>
                                                    {result.percentage}%
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                );
            }

            if (examFinished) {
                const latestResult = examResults[examResults.length - 1];
                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-24 p-6 flex items-center justify-center">
                        <div className="bg-white rounded-3xl p-8 shadow-2xl text-center max-w-md w-full animate-slide-up">
                            <div className="text-7xl mb-4">
                                {latestResult.percentage >= 80 ? 'üéâ' : latestResult.percentage >= 60 ? 'üëç' : 'üí™'}
                            </div>
                            <h2 className="text-2xl font-bold text-gray-800 mb-2">{t.examScore}</h2>
                            <div className="text-6xl font-black gradient-text mb-4">
                                {latestResult.percentage}%
                            </div>
                            <div className="text-gray-600 mb-6">
                                {latestResult.score} / {latestResult.total} {t.correct}
                            </div>
                            <div className={`p-4 rounded-xl mb-6 ${
                                latestResult.percentage >= 80 ? 'bg-green-50 text-green-800' :
                                latestResult.percentage >= 60 ? 'bg-yellow-50 text-yellow-800' : 'bg-red-50 text-red-800'
                            }`}>
                                <div className="font-bold mb-1">{t.bacReadiness}</div>
                                <div>
                                    {latestResult.percentage >= 80 ? lang === 'en' ? 'Excellent! You\'re ready!' : '·ûõ·üí·û¢·ûé·û∂·ûü·üã! ·û¢·üí·ûì·ûÄ·ûö·ûΩ·ûÖ·ûö·û∂·ûõ·üã·û†·ûæ·ûô!' :
                                     latestResult.percentage >= 60 ? lang === 'en' ? 'Good! Keep practicing!' : '·ûõ·üí·û¢! ·ûî·ûì·üí·ûè·û¢·ûì·ûª·ûú·ûè·üí·ûè!' :
                                     lang === 'en' ? 'Keep studying! You can do it!' : '·ûî·ûì·üí·ûè·ûü·û∑·ûÄ·üí·ûü·û∂! ·û¢·üí·ûì·ûÄ·û¢·û∂·ûÖ·ûí·üí·ûú·ûæ·ûî·û∂·ûì!'}
                                </div>
                            </div>
                            <div className="space-y-3">
                                <button
                                    onClick={startExam}
                                    className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-xl font-bold"
                                >
                                    {t.retakeExam}
                                </button>
                                <button
                                    onClick={() => setExamStarted(false)}
                                    className="w-full bg-gray-200 text-gray-700 py-4 rounded-xl font-bold"
                                >
                                    Back to Home
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            const currentQ = mockExamData[currentQuestionIndex];

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-24 p-6">
                    <div className="mb-4">
                        <div className="flex justify-between items-center mb-2">
                            <div className="text-sm text-gray-600">
                                Question {currentQuestionIndex + 1} / {mockExamData.length}
                            </div>
                            <div className="text-sm font-bold text-purple-600">
                                {Object.keys(answers).length} answered
                            </div>
                        </div>
                        <div className="w-full bg-gray-200 rounded-full h-2">
                            <div 
                                className="bg-purple-600 h-2 rounded-full transition-all"
                                style={{ width: `${((currentQuestionIndex + 1) / mockExamData.length) * 100}%` }}
                            />
                        </div>
                    </div>

                    <div className="bg-white rounded-3xl shadow-2xl p-6 mb-4">
                        <div className="text-sm text-purple-600 font-medium mb-3">
                            {currentQ.subject === 'math' ? t.math : t.biology}
                        </div>
                        <div className="text-xl font-bold text-gray-800 mb-6">
                            {currentQ.q[lang]}
                        </div>

                        <div className="space-y-3">
                            {currentQ.options.map((option, idx) => (
                                <button
                                    key={idx}
                                    onClick={() => handleAnswer(currentQuestionIndex, option)}
                                    className={`w-full p-4 rounded-xl font-medium text-left transition-all ${
                                        answers[currentQuestionIndex] === option
                                            ? 'bg-purple-500 text-white'
                                            : 'bg-gray-100 text-gray-700 hover:bg-purple-100'
                                    }`}
                                >
                                    {option}
                                </button>
                            ))}
                        </div>
                    </div>

                    <div className="flex gap-3">
                        {currentQuestionIndex > 0 && (
                            <button
                                onClick={() => setCurrentQuestionIndex(currentQuestionIndex - 1)}
                                className="flex-1 bg-gray-300 text-gray-700 py-4 rounded-xl font-bold"
                            >
                                ‚Üê Previous
                            </button>
                        )}
                        {currentQuestionIndex < mockExamData.length - 1 ? (
                            <button
                                onClick={() => setCurrentQuestionIndex(currentQuestionIndex + 1)}
                                className="flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-xl font-bold"
                            >
                                Next ‚Üí
                            </button>
                        ) : (
                            <button
                                onClick={submitExam}
                                disabled={Object.keys(answers).length < mockExamData.length}
                                className="flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-4 rounded-xl font-bold disabled:opacity-50"
                            >
                                {t.submitExam} ‚úÖ
                            </button>
                        )}
                    </div>
                </div>
            );
        }

        // Tab Bar Component
        function TabBar({ currentPage, setCurrentPage, t }) {
            const tabs = [
                { id: 'home', icon: 'üè†', label: t.home },
                { id: 'mockexam', icon: 'üìù', label: 'Test' },
                { id: 'chat', icon: 'üí¨', label: 'Chat' },
                { id: 'leaderboard', icon: 'üèÜ', label: 'Rank' },
                { id: 'progress', icon: 'üìä', label: 'Progress' },
                { id: 'donate', icon: 'üíù', label: t.donate }
            ];

            return (
                <div className="tab-bar">
                    <div className="flex justify-around py-2">
                        {tabs.map(tab => (
                            <button
                                key={tab.id}
                                onClick={() => setCurrentPage(tab.id)}
                                className={`flex flex-col items-center gap-1 px-3 py-2 rounded-xl transition-all ${
                                    currentPage === tab.id 
                                        ? 'bg-purple-100 text-purple-600 scale-110' 
                                        : 'text-gray-500'
                                }`}
                            >
                                <span className="text-2xl">{tab.icon}</span>
                                <span className="text-[10px] font-medium">{tab.label}</span>
                            </button>
                        ))}
                    </div>
                </div>
            );
        }

        // Render App
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
