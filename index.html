<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bac II Study Companion</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Bangers&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .bangers {
            font-family: 'Bangers', cursive;
            letter-spacing: 2px;
        }
        .app-container {
            max-width: 430px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.3);
        }
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .animate-slide-up {
            animation: slideUp 0.5s ease-out forwards;
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        .animate-bounce {
            animation: bounce 2s infinite;
        }
        .animate-pulse {
            animation: pulse 2s infinite;
        }
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .tab-bar {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            max-width: 430px;
            width: 100%;
            background: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 100;
        }
        .floating-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Translation data
        const translations = {
            en: {
                welcome: "Welcome to Your",
                bacStudy: "Bac II Study Journey",
                surveyIntro: "Let's personalize your path to success!",
                strengths: "What are your strengths?",
                weaknesses: "What are your weaknesses?",
                targetGrade: "What's your target grade?",
                monthsLeft: "Months until Bac II?",
                generateRoadmap: "Generate My Roadmap",
                home: "Home",
                lessons: "Lessons",
                donate: "Donate",
                chat: "Chat",
                profile: "Profile",
                daysLeft: "Days Until Bac II",
                currentStreak: "Day Streak",
                todayChallenge: "Today's Challenge",
                dailyPlan: "Today's Action Plan",
                yourRoadmap: "Your Personalized Roadmap",
                recommendedTime: "Recommended Study Time",
                hoursPerDay: "hours/day",
                basedOn: "Based on your goal & timeline",
                roadmapPhases: "Your Learning Phases",
                todaysPlan: "Complete today's tasks to earn 50 XP!",
                completedMsg: "Great work! Come back tomorrow for more!",
                math: "Math",
                biology: "Biology",
                basicLimits: "Basic Limits",
                basicProbability: "Basic Probability",
                humanBody: "Human Body",
                humanBrain: "Human Brain",
                importanceNote: "Importance for Exam",
                summary: "Summary",
                funFact: "Fun Fact",
                surpriseTip: "Surprise Tip",
                didYouKnow: "Did You Know?",
                quickChallenge: "Quick Challenge",
                earnXP: "Earn +20 XP",
                backToLessons: "Back to Lessons",
                donateTitle: "Support Education",
                donateSubtitle: "100% goes to scholarships for poor students",
                moneyDonation: "Money Donation",
                watchAds: "Watch Ads to Donate",
                topDonors: "Top Donors Leaderboard",
                thankYou: "Thank you for your support!",
                aiCoach: "AI Study Coach",
                askQuestion: "Ask me anything about your studies...",
                send: "Send",
                noInternet: "âš ï¸ No internet connection. Please try again later.",
                commonQuestions: "Common Questions",
                viewRoadmap: "View My Roadmap",
                studyNow: "Start Studying",
                motivationQuote: "Motivation of the Day",
                completeLesson: "Complete lesson",
                practice: "Practice exercises",
                reviewCards: "Review flashcards",
                dailyChallengeTask: "Daily challenge",
                chooseDepth: "Choose your study depth:",
                quickReview: "Quick Review (10 min)",
                standardStudy: "Standard Study (30 min)",
                deepDive: "Deep Dive (60 min)",
                chemistry: "Chemistry",
                physics: "Physics",
                history: "History",
                english: "English"
            },
            km: {
                welcome: "áŸá¼á˜áŸáŸ’áœá¶á‚á˜á“áŸá˜á€á€á¶á“áŸ‹",
                bacStudy: "á€á¶ášá’áŸ’áœá¾áŠáŸ†áá¾ášáŸá·á€áŸ’áŸá¶ Bac II",
                surveyIntro: "ááŸ„áŸ‡á’áŸ’áœá¾á•áŸ’á›á¼áœášá”áŸáŸ‹á¢áŸ’á“á€á²áŸ’á™á•áŸ’á‘á¶á›áŸ‹ááŸ’á›á½á“!",
                strengths: "áá¾á¢áŸ’á“á€á–á¼á€áŸ‚á˜á»ááœá·á‡áŸ’á‡á¶á¢áŸ’áœá¸?",
                weaknesses: "áá¾á¢áŸ’á“á€ááŸ’áŸáŸ„á™á˜á»ááœá·á‡áŸ’á‡á¶á¢áŸ’áœá¸?",
                targetGrade: "áá¾á¢áŸ’á“á€á…á„áŸ‹á”á¶á“á–á·á“áŸ’á‘á»á”áŸ‰á»á“áŸ’á˜á¶á“?",
                monthsLeft: "á“áŸ…áŸá›áŸ‹á”áŸ‰á»á“áŸ’á˜á¶á“ááŸ‚áŠá›áŸ‹ Bac II?",
                generateRoadmap: "á”á„áŸ’á€á¾áá•áŸ‚á“á€á¶ášášá”áŸáŸ‹ááŸ’á‰á»áŸ†",
                home: "á‘áŸ†á–áŸášáŠá¾á˜",
                lessons: "á˜áŸášáŸ€á“",
                donate: "á”ášá·á…áŸ’á…á¶á‚",
                chat: "á‡á‡áŸ‚á€",
                profile: "á”áŸ’ášáœááŸ’áá·ášá¼á”",
                daysLeft: "ááŸ’á„áŸƒá“áŸ…áŸá›áŸ‹áŠá›áŸ‹ Bac II",
                currentStreak: "ááŸ’á„áŸƒá‡á¶á”áŸ‹á‚áŸ’á“á¶",
                todayChallenge: "á”á‰áŸ’á á¶á”áŸ’ášáˆá˜ááŸ’á„áŸƒá“áŸáŸ‡",
                dailyPlan: "á•áŸ‚á“á€á¶ášáŸá€á˜áŸ’á˜á—á¶á–ááŸ’á„áŸƒá“áŸáŸ‡",
                yourRoadmap: "á•áŸ‚á“á€á¶ášáŸá·á€áŸ’áŸá¶á•áŸ’á‘á¶á›áŸ‹ááŸ’á›á½á“ášá”áŸáŸ‹á¢áŸ’á“á€",
                recommendedTime: "á–áŸá›áœáŸá›á¶áŸá·á€áŸ’áŸá¶áŠáŸ‚á›á”á¶á“ááŸ‚á“á¶áŸ†",
                hoursPerDay: "á˜áŸ‰áŸ„á„/ááŸ’á„áŸƒ",
                basedOn: "á•áŸ’á¢áŸ‚á€á›á¾á‚áŸ„á›áŠáŸ…á“á·á„á–áŸá›áœáŸá›á¶ášá”áŸáŸ‹á¢áŸ’á“á€",
                roadmapPhases: "áŠáŸ†áá¶á€áŸ‹á€á¶á›á“áŸƒá€á¶ášášáŸ€á“áŸá¼ááŸ’ášášá”áŸáŸ‹á¢áŸ’á“á€",
                todaysPlan: "á”áŸ†á–áŸá‰á€á·á…áŸ’á…á€á¶ášááŸ’á„áŸƒá“áŸáŸ‡áŠá¾á˜áŸ’á”á¸á‘á‘á½á›á”á¶á“ 50 XP!",
                completedMsg: "á›áŸ’á¢áá¶áŸáŸ‹! ááŸ’ášá›á”áŸ‹á˜á€áœá·á‰á“áŸ…ááŸ’á„áŸƒáŸáŸ’á¢áŸ‚á€!",
                math: "á‚áá·ááœá·á‘áŸ’á™á¶",
                biology: "á‡á¸áœáœá·á‘áŸ’á™á¶",
                basicLimits: "á›á¸á˜á¸áá˜á¼á›áŠáŸ’á‹á¶á“",
                basicProbability: "á”áŸ’ášá¼á”á¶á”áŸŠá¸á›á¸ááŸá˜á¼á›áŠáŸ’á‹á¶á“",
                humanBody: "ášá¶á„á€á¶á™á˜á“á»áŸáŸ’áŸ",
                humanBrain: "áá½ášá€áŸ’á”á¶á›á˜á“á»áŸáŸ’áŸ",
                importanceNote: "áŸá¶ášáŸˆáŸáŸ†áá¶á“áŸ‹áŸá˜áŸ’ášá¶á”áŸ‹á”áŸ’ášá¡á„",
                summary: "áŸá„áŸ’ááŸá”",
                funFact: "á€á¶ášá–á·áá‚á½ášá²áŸ’á™á…á¶á”áŸ‹á¢á¶ášá˜áŸ’á˜ááŸ",
                surpriseTip: "á‚á“áŸ’á›á¹áŸ‡á—áŸ’á‰á¶á€áŸ‹á•áŸ’á¢á¾á›",
                didYouKnow: "áá¾á¢áŸ’á“á€áŠá¹á„á‘áŸ?",
                quickChallenge: "á”á‰áŸ’á á¶á”áŸ’ášáˆá˜ášá áŸáŸ",
                earnXP: "á‘á‘á½á›á”á¶á“ +20 XP",
                backToLessons: "ááŸ’ášá›á”áŸ‹á‘áŸ…á˜áŸášáŸ€á“",
                donateTitle: "á‚á¶áŸ†á‘áŸ’ášá€á¶ášá¢á”áŸ‹ášáŸ†",
                donateSubtitle: "100% á‘áŸ…á‡á¶á¢á¶á á¶ášá¼á”á€ášááŸáŸá˜áŸ’ášá¶á”áŸ‹áŸá·áŸáŸ’áŸá€áŸ’ášá¸á€áŸ’áš",
                moneyDonation: "á”ášá·á…áŸ’á…á¶á‚á”áŸ’ášá¶á€áŸ‹",
                watchAds: "á˜á¾á›á•áŸ’áŸá¶á™á–á¶áá·á‡áŸ’á‡á€á˜áŸ’á˜áŠá¾á˜áŸ’á”á¸á”ášá·á…áŸ’á…á¶á‚",
                topDonors: "á¢áŸ’á“á€á”ášá·á…áŸ’á…á¶á‚á€áŸ†á–á¼á›",
                thankYou: "áŸá¼á˜á¢ášá‚á»áá…áŸ†á–áŸ„áŸ‡á€á¶ášá‚á¶áŸ†á‘áŸ’ášášá”áŸáŸ‹á¢áŸ’á“á€!",
                aiCoach: "á‚áŸ’ášá¼á”á„áŸ’á á¶ááŸ‹ AI",
                askQuestion: "áŸá½ášááŸ’á‰á»áŸ†á¢áŸ’áœá¸á€áŸá”á¶á“á¢áŸ†á–á¸á€á¶ášáŸá·á€áŸ’áŸá¶ášá”áŸáŸ‹á¢áŸ’á“á€...",
                send: "á•áŸ’á‰á¾",
                noInternet: "âš ï¸ á‚áŸ’á˜á¶á“á¢áŸŠá¸á“á’áºáá·ááŸ” áŸá¼á˜á–áŸ’á™á¶á™á¶á˜á˜áŸ’áá„á‘áŸ€áá“áŸ…á–áŸá›á€áŸ’ášáŸ„á™áŸ”",
                commonQuestions: "áŸáŸ†áá½ášá‘á¼á‘áŸ…",
                viewRoadmap: "á˜á¾á›á•áŸ‚á“á€á¶ášášá”áŸáŸ‹ááŸ’á‰á»áŸ†",
                studyNow: "á…á¶á”áŸ‹á•áŸ’áá¾á˜áŸá·á€áŸ’áŸá¶",
                motivationQuote: "á€á¶ášá›á¾á€á‘á¹á€á…á·ááŸ’áá”áŸ’ášá…á¶áŸ†ááŸ’á„áŸƒ",
                completeLesson: "á”áŸ†á–áŸá‰á˜áŸášáŸ€á“",
                practice: "á¢á“á»áœááŸ’áá›áŸ†á á¶ááŸ‹",
                reviewCards: "á–á·á“á·ááŸ’á™á€á¶áá…á„á…á¶áŸ†",
                dailyChallengeTask: "á”á‰áŸ’á á¶á”áŸ’ášáˆá˜á”áŸ’ášá…á¶áŸ†ááŸ’á„áŸƒ",
                chooseDepth: "á‡áŸ’ášá¾áŸášá¾áŸá€á˜áŸ’ášá·ááŸá·á€áŸ’áŸá¶:",
                quickReview: "á–á·á“á·ááŸ’á™ášá áŸáŸ (10 á“á¶á‘á¸)",
                standardStudy: "áŸá·á€áŸ’áŸá¶áŸáŸ’áá„áŸ‹áŠá¶áš (30 á“á¶á‘á¸)",
                deepDive: "áŸáŸŠá¸á‡á˜áŸ’ášáŸ… (60 á“á¶á‘á¸)",
                chemistry: "á‚á¸á˜á¸áœá·á‘áŸ’á™á¶",
                physics: "ášá¼á”áœá·á‘áŸ’á™á¶",
                history: "á”áŸ’ášáœááŸ’áá·áŸá¶áŸáŸ’ááŸ’áš",
                english: "á¢á„áŸ‹á‚áŸ’á›áŸáŸ"
            }
        };

        // Lessons content
        const lessonsData = {
            math: {
                limits: {
                    title: { en: "Basic Limits", km: "á›á¸á˜á¸áá˜á¼á›áŠáŸ’á‹á¶á“" },
                    importance: "85%",
                    content: {
                        en: "A limit describes the value that a function approaches as the input approaches some value. Limits are essential for understanding calculus and are frequently tested in Bac II exams.",
                        km: "á›á¸á˜á¸áá–á·á–ááŸŒá“á¶á¢áŸ†á–á¸áá˜áŸ’á›áŸƒáŠáŸ‚á›á¢á“á»á‚á˜á“áŸá‘áŸ…á‡á·áá“áŸ…á–áŸá›áŠáŸ‚á›á’á¶áá»á…á¼á›á‘áŸ…á‡á·ááá˜áŸ’á›áŸƒá˜á½á™áŸ” á›á¸á˜á¸áá˜á¶á“áŸá¶ášáŸˆáŸáŸ†áá¶á“áŸ‹áŸá˜áŸ’ášá¶á”áŸ‹á€á¶ášá™á›áŸ‹áŠá¹á„á–á¸á€á¶á›áŸ‹á‚á»á›á“á·á„ááŸ’ášá¼áœá”á¶á“áŸá¶á€á›áŸ’á”á„á‰á¹á€á‰á¶á”áŸ‹á“áŸ…á€áŸ’á“á»á„á”áŸ’ášá¡á„ Bac IIáŸ”"
                    },
                    summary: {
                        en: "Key formulas: lim(xâ†’a) f(x) = L. Always check left and right limits separately.",
                        km: "ášá¼á”á˜á“áŸ’ááŸáŸ†áá¶á“áŸ‹: lim(xâ†’a) f(x) = LáŸ” ááŸ’ášá¼áœá–á·á“á·ááŸ’á™á›á¸á˜á¸ááá¶á„á†áŸ’áœáŸá„á“á·á„áŸáŸ’áá¶áŸ†áŠá¶á…áŸ‹áŠáŸ„á™á¡áŸ‚á€áŸ”"
                    },
                    funFact: {
                        en: "The concept of limits was invented because mathematicians wanted to divide by zero... safely!",
                        km: "á‚áŸ†á“á·áá“áŸƒá›á¸á˜á¸áááŸ’ášá¼áœá”á¶á“á”á„áŸ’á€á¾áá¡á¾á„á–áŸ’ášáŸ„áŸ‡á‚áá·ááœá·á‘á¼á…á„áŸ‹á…áŸ‚á€áŠáŸ„á™áŸá¼á“áŸ’á™... á”áŸ‰á»á“áŸ’ááŸ‚á²áŸ’á™á˜á¶á“áŸá»áœááŸ’áá·á—á¶á–!"
                    },
                    tip: {
                        en: "Pro trick: Always check left and right limits separately - they might not match!",
                        km: "á‚á“áŸ’á›á¹áŸ‡á¢áŸ’á“á€á‡áŸ†á“á¶á‰: ááŸ’ášá¼áœááŸ‚á–á·á“á·ááŸ’á™á›á¸á˜á¸ááá¶á„á†áŸ’áœáŸá„á“á·á„áŸáŸ’áá¶áŸ†áŠá¶á…áŸ‹áŠáŸ„á™á¡áŸ‚á€ - á–á½á€áœá¶á”áŸ’ášá áŸ‚á›á‡á¶á˜á·á“áŠá¼á…á‚áŸ’á“á¶!"
                    }
                },
                probability: {
                    title: { en: "Basic Probability", km: "á”áŸ’ášá¼á”á¶á”áŸŠá¸á›á¸ááŸá˜á¼á›áŠáŸ’á‹á¶á“" },
                    importance: "40%",
                    content: {
                        en: "Probability measures the likelihood of an event occurring. Combined with combinatorics, it makes up a significant portion of the Bac II math exam.",
                        km: "á”áŸ’ášá¼á”á¶á”áŸŠá¸á›á¸ááŸáœá¶áŸáŸ‹áœáŸ‚á„á›á‘áŸ’á’á—á¶á–á“áŸƒá€á¶ášá€á¾áá¡á¾á„á“áŸƒá–áŸ’ášá¹ááŸ’áá·á€á¶ášááŸá˜á½á™áŸ” á”á‰áŸ’á…á¼á›á‚áŸ’á“á¶á‡á¶á˜á½á™á€á»áŸ†á”áŸŠá¸áá¶á‘áŸáš áœá¶á”á„áŸ’á€á¾áá‡á¶á•áŸ’á“áŸ‚á€áŸáŸ†áá¶á“áŸ‹á“áŸƒá”áŸ’ášá¡á„á‚áá·ááœá·á‘áŸ’á™á¶ Bac IIáŸ”"
                    },
                    summary: {
                        en: "P(Event) = Favorable Outcomes / Total Outcomes. Use tree diagrams for complex problems.",
                        km: "P(á–áŸ’ášá¹ááŸ’áá·á€á¶ášááŸ) = á›á‘áŸ’á’á•á›á¢áŸ†ááŸ„á™á•á› / á›á‘áŸ’á’á•á›áŸášá»á”áŸ” á”áŸ’ášá¾áŠáŸ’á™á¶á€áŸ’ášá¶á˜áŠá¾á˜áˆá¾áŸá˜áŸ’ášá¶á”áŸ‹á”á‰áŸ’á á¶áŸáŸ’á˜á»á‚áŸáŸ’á˜á¶á‰áŸ”"
                    },
                    funFact: {
                        en: "Flipping a coin 10 times heads doesn't make tails more likely next time! Each flip is independent.",
                        km: "á€á¶ášá”áŸ„áŸ‡á€á¶á€áŸ‹ 10 áŠá„á…áŸá‰á€áŸ’á”á¶á›á˜á·á“á’áŸ’áœá¾á²áŸ’á™á€á“áŸ’á‘á»á™á˜á¶á“á›á‘áŸ’á’á—á¶á–á…áŸ’ášá¾á“á“áŸ…á–áŸá›á”á“áŸ’á‘á¶á”áŸ‹á‘áŸ! á€á¶ášá”áŸ„áŸ‡á“á¸á˜á½á™áŸ—á¯á€ášá¶á‡áŸ’á™á‚áŸ’á“á¶áŸ”"
                    },
                    tip: {
                        en: "Draw tree diagrams for complex problems - it's much faster and you won't miss cases!",
                        km: "á‚á¼ášáŠáŸ’á™á¶á€áŸ’ášá¶á˜áŠá¾á˜áˆá¾áŸá˜áŸ’ášá¶á”áŸ‹á”á‰áŸ’á á¶áŸáŸ’á˜á»á‚áŸáŸ’á˜á¶á‰ - áœá¶ášá áŸáŸá‡á¶á„á“á·á„á¢áŸ’á“á€á“á¹á„á˜á·á“ášáŸ†á›á„á€ášáá¸á‘áŸ!"
                    }
                }
            },
            biology: {
                body: {
                    title: { en: "Human Body", km: "ášá¶á„á€á¶á™á˜á“á»áŸáŸ’áŸ" },
                    importance: "65%",
                    content: {
                        en: "The human body consists of multiple organ systems working together. The digestive system is the most frequently tested topic in Bac II biology exams.",
                        km: "ášá¶á„á€á¶á™á˜á“á»áŸáŸ’áŸá˜á¶á“á”áŸ’ášá–áŸá“áŸ’á’áŸášá¸ášá¶á„áŸ’á‚á…áŸ’ášá¾á“áŠáŸ‚á›á’áŸ’áœá¾á€á¶ášá‡á¶á˜á½á™á‚áŸ’á“á¶áŸ” á”áŸ’ášá–áŸá“áŸ’á’ášáŸ†á›á¶á™á¢á¶á á¶ášá‚áºá‡á¶á”áŸ’ášá’á¶á“á”á‘áŠáŸ‚á›ááŸ’ášá¼áœá”á¶á“áŸá¶á€á›áŸ’á”á„á‰á¹á€á‰á¶á”áŸ‹á”áŸ†á•á»áá“áŸ…á€áŸ’á“á»á„á”áŸ’ášá¡á„á‡á¸áœáœá·á‘áŸ’á™á¶ Bac IIáŸ”"
                    },
                    summary: {
                        en: "Major systems: Digestive, Respiratory, Circulatory, Nervous, Skeletal, Muscular. Make colorful diagrams!",
                        km: "á”áŸ’ášá–áŸá“áŸ’á’áŸáŸ†áá¶á“áŸ‹áŸ—: ášáŸ†á›á¶á™á¢á¶á á¶áš áŠá„áŸ’á á¾á˜ á…ášá¶á…ášáˆá¶á˜ áŸášáŸáŸƒá”áŸ’ášáŸá¶á‘ á‚áŸ’ášáŸ„á„á†áŸ’á¢á¹á„ áŸá¶á…áŸ‹áŠá»áŸ†áŸ” á’áŸ’áœá¾áŠáŸ’á™á¶á€áŸ’ášá¶á˜á–ááŸŒ!"
                    },
                    funFact: {
                        en: "Your stomach gets a completely new lining every 3-4 days to protect itself from its own acid!",
                        km: "á€áŸ’ášá–áŸ‡ášá”áŸáŸ‹á¢áŸ’á“á€á‘á‘á½á›á”á¶á“áŸáŸ’ášá‘á¶á”áŸ‹ááŸ’á˜á¸á‘á¶áŸ†á„áŸáŸ’ášá»á„ášáŸ€á„ášá¶á›áŸ‹ 3-4 ááŸ’á„áŸƒáŠá¾á˜áŸ’á”á¸á€á¶ášá–á¶ášááŸ’á›á½á“á¯á„á–á¸á¢á¶áŸáŸŠá¸áášá”áŸáŸ‹áœá¶!"
                    },
                    tip: {
                        en: "Make body system diagrams with different colors for each organ - much easier to remember!",
                        km: "á’áŸ’áœá¾áŠáŸ’á™á¶á€áŸ’ášá¶á˜á”áŸ’ášá–áŸá“áŸ’á’ášá¶á„á€á¶á™áŠáŸ„á™á–ááŸŒá•áŸ’áŸáŸá„áŸ—á‚áŸ’á“á¶áŸá˜áŸ’ášá¶á”áŸ‹áŸášá¸ášá¶á„áŸ’á‚á“á¸á˜á½á™áŸ— - á„á¶á™á“á¹á€á…á¶áŸ†á‡á¶á„!"
                    },
                    didYouKnow: {
                        en: "You have the same number of bones in your neck as a giraffe: 7 cervical vertebrae!",
                        km: "á¢áŸ’á“á€á˜á¶á“á†áŸ’á¢á¹á„á€áŸ’á“á»á„á€á“áŸ…áŠá¼á…á‚áŸ’á“á¶á‡á¶á˜á½á™á áŸ’áŸá¸ášáŸ‰á¶á áŸ’áœ: 7 á€á„á†áŸ’á¢á¹á„á€á„!"
                    }
                },
                brain: {
                    title: { en: "Human Brain", km: "áá½ášá€áŸ’á”á¶á›á˜á“á»áŸáŸ’áŸ" },
                    importance: "70%",
                    content: {
                        en: "The human brain controls all body functions through billions of neurons. Understanding neuron structure is critical for Bac II exams.",
                        km: "áá½ášá€áŸ’á”á¶á›á˜á“á»áŸáŸ’áŸá‚áŸ’ášá”áŸ‹á‚áŸ’ášá„á˜á»áá„á¶ášá‘á¶áŸ†á„á¢áŸáŸ‹ášá”áŸáŸ‹ášá¶á„á€á¶á™áá¶á˜ášá™áŸˆááºášáŸ‰á¼á“ášá¶á”áŸ‹á–á¶á“áŸ‹á›á¶á“áŸ” á€á¶ášá™á›áŸ‹áŠá¹á„á–á¸ášá…á“á¶áŸá˜áŸ’á–áŸá“áŸ’á’ááºášáŸ‰á¼á“á‚áºáŸáŸ†áá¶á“áŸ‹áŸá˜áŸ’ášá¶á”áŸ‹á”áŸ’ášá¡á„ Bac IIáŸ”"
                    },
                    summary: {
                        en: "Main parts: Cerebrum (thinking), Cerebellum (coordination), Brain stem (vital functions). Neurons communicate via synapses.",
                        km: "á•áŸ’á“áŸ‚á€áŸáŸ†áá¶á“áŸ‹áŸ—: áŸáŸášáŸá”áŸ’ášá»á˜ (á‚áŸ†á“á·á), áŸáŸášáŸá”áŸ‚á› (á€á¶ášáŸá˜áŸ’ášá”áŸá˜áŸ’ášá½á›), áŠá¾á˜áá½ášá€áŸ’á”á¶á› (á˜á»áá„á¶ášáŸáŸ†áá¶á“áŸ‹)áŸ” ááºášáŸ‰á¼á“á‘áŸ†á“á¶á€áŸ‹á‘áŸ†á“á„áá¶á˜ášá™áŸˆáŸáŸŠá¸áá¶á”áŸ”"
                    },
                    funFact: {
                        en: "Your brain uses 20% of your body's total energy but is only 2% of your body weight!",
                        km: "áá½ášá€áŸ’á”á¶á›ášá”áŸáŸ‹á¢áŸ’á“á€á”áŸ’ášá¾ 20% á“áŸƒáá¶á˜á–á›áŸášá»á”ášá”áŸáŸ‹ášá¶á„á€á¶á™á”áŸ‰á»á“áŸ’ááŸ‚á˜á¶á“ááŸ‚ 2% á“áŸƒá‘á˜áŸ’á„á“áŸ‹ášá¶á„á€á¶á™!"
                    },
                    tip: {
                        en: "Connect brain parts to their functions using memorable stories - it sticks better than pure memorization!",
                        km: "á—áŸ’á‡á¶á”áŸ‹á•áŸ’á“áŸ‚á€áá½ášá€áŸ’á”á¶á›á‘áŸ…á“á¹á„á˜á»áá„á¶ášášá”áŸáŸ‹áœá¶áŠáŸ„á™á”áŸ’ášá¾ášá¿á„áŠáŸ‚á›á…á„á…á¶áŸ†á”á¶á“ - áœá¶áŸáŸ’á¢á·áá‡á¶á„á€á¶ášá…á„á…á¶áŸ†áŸá»á‘áŸ’á’áŸá¶á’!"
                    },
                    didYouKnow: {
                        en: "You have enough neurons in your brain to count every star in the Milky Way galaxy!",
                        km: "á¢áŸ’á“á€á˜á¶á“ááºášáŸ‰á¼á“á‚áŸ’ášá”áŸ‹á‚áŸ’ášá¶á“áŸ‹á€áŸ’á“á»á„áá½ášá€áŸ’á”á¶á›ášá”áŸáŸ‹á¢áŸ’á“á€áŠá¾á˜áŸ’á”á¸ášá¶á”áŸ‹á•áŸ’á€á¶á™á‘á¶áŸ†á„á¢áŸáŸ‹á“áŸ…á€áŸ’á“á»á„á€á¶á¡á¶á€áŸ‹áŸáŸŠá¸ Milky Way!"
                    }
                }
            }
        };

        // Main App Component
        function App() {
            const [lang, setLang] = useState('en');
            const [surveyComplete, setSurveyComplete] = useState(false);
            const [currentPage, setCurrentPage] = useState('survey');
            const [userData, setUserData] = useState({
                strengths: [],
                weaknesses: [],
                targetGrade: '',
                monthsLeft: ''
            });
            const [xp, setXp] = useState(0);
            const [level, setLevel] = useState(1);
            const [streak, setStreak] = useState(3);
            const [tasksCompleted, setTasksCompleted] = useState({
                lesson: false,
                practice: false,
                flashcards: false,
                challenge: false
            });
            const [currentLesson, setCurrentLesson] = useState(null);

            const t = translations[lang];

            useEffect(() => {
                const saved = localStorage.getItem('bacStudyData');
                if (saved) {
                    const data = JSON.parse(saved);
                    setSurveyComplete(data.surveyComplete || false);
                    setUserData(data.userData || userData);
                    setXp(data.xp || 0);
                    setLevel(data.level || 1);
                    setStreak(data.streak || 3);
                    setTasksCompleted(data.tasksCompleted || tasksCompleted);
                    if (data.surveyComplete) {
                        setCurrentPage('home');
                    }
                }
            }, []);

            useEffect(() => {
                const dataToSave = {
                    surveyComplete,
                    userData,
                    xp,
                    level,
                    streak,
                    tasksCompleted
                };
                localStorage.setItem('bacStudyData', JSON.stringify(dataToSave));
            }, [surveyComplete, userData, xp, level, streak, tasksCompleted]);

            const completeSurvey = (data) => {
                setUserData(data);
                setSurveyComplete(true);
                setCurrentPage('roadmap');
            };

            const completeTask = (task) => {
                if (!tasksCompleted[task]) {
                    setTasksCompleted({...tasksCompleted, [task]: true});
                    setXp(xp + 20);
                    if ((xp + 20) >= level * 100) {
                        setLevel(level + 1);
                    }
                }
            };

            const getDaysUntilBac = () => {
                return parseInt(userData.monthsLeft) * 30 || 150;
            };

            const getStudyHours = () => {
                const gradeMap = { 'A': 3.5, 'B': 2.5, 'C': 1.75, 'D': 1.25, 'E': 1 };
                return gradeMap[userData.targetGrade] || 2;
            };

            return (
                <div className="app-container">
                    {!surveyComplete ? (
                        <SurveyPage lang={lang} setLang={setLang} onComplete={completeSurvey} t={t} />
                    ) : (
                        <>
                            {currentPage === 'roadmap' && (
                                <RoadmapPage 
                                    lang={lang} 
                                    userData={userData} 
                                    studyHours={getStudyHours()}
                                    onContinue={() => setCurrentPage('home')}
                                    t={t}
                                />
                            )}
                            {currentPage === 'home' && (
                                <HomePage 
                                    lang={lang}
                                    setLang={setLang}
                                    xp={xp}
                                    level={level}
                                    streak={streak}
                                    daysLeft={getDaysUntilBac()}
                                    tasksCompleted={tasksCompleted}
                                    completeTask={completeTask}
                                    onViewRoadmap={() => setCurrentPage('roadmap')}
                                    t={t}
                                />
                            )}
                            {currentPage === 'lessons' && (
                                <LessonsPage 
                                    lang={lang}
                                    setCurrentLesson={setCurrentLesson}
                                    setCurrentPage={setCurrentPage}
                                    t={t}
                                />
                            )}
                            {currentPage === 'lesson-detail' && currentLesson && (
                                <LessonDetailPage 
                                    lang={lang}
                                    lesson={currentLesson}
                                    onBack={() => setCurrentPage('lessons')}
                                    onComplete={() => completeTask('lesson')}
                                    t={t}
                                />
                            )}
                            {currentPage === 'donate' && (
                                <DonatePage lang={lang} t={t} />
                            )}
                            {currentPage === 'chat' && (
                                <ChatPage lang={lang} t={t} />
                            )}
                            
                            {currentPage !== 'roadmap' && currentPage !== 'lesson-detail' && (
                                <TabBar currentPage={currentPage} setCurrentPage={setCurrentPage} t={t} />
                            )}
                        </>
                    )}
                </div>
            );
        }

        // Survey Page Component
        function SurveyPage({ lang, setLang, onComplete, t }) {
            const [step, setStep] = useState(1);
            const [formData, setFormData] = useState({
                strengths: [],
                weaknesses: [],
                targetGrade: '',
                monthsLeft: ''
            });

            const subjects = ['math', 'biology', 'chemistry', 'physics', 'history', 'english'];

            const toggleSubject = (field, subject) => {
                const current = formData[field];
                if (current.includes(subject)) {
                    setFormData({...formData, [field]: current.filter(s => s !== subject)});
                } else {
                    setFormData({...formData, [field]: [...current, subject]});
                }
            };

            const handleSubmit = () => {
                onComplete(formData);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-600 to-indigo-700 p-6 flex flex-col">
                    <div className="flex justify-end mb-4">
                        <button 
                            onClick={() => setLang(lang === 'en' ? 'km' : 'en')}
                            className="bg-white/20 text-white px-4 py-2 rounded-full text-sm font-medium"
                        >
                            {lang === 'en' ? 'ğŸ‡°ğŸ‡­ á—á¶áŸá¶ááŸ’á˜áŸ‚áš' : 'ğŸ‡¬ğŸ‡§ English'}
                        </button>
                    </div>

                    <div className="flex-1 flex flex-col justify-center animate-slide-up">
                        <div className="text-center mb-8">
                            <h1 className="bangers text-5xl text-white mb-2 animate-bounce">
                                {t.welcome}
                            </h1>
                            <h2 className="text-3xl font-bold text-yellow-300 mb-4">
                                {t.bacStudy}
                            </h2>
                            <p className="text-white/90 text-lg">
                                {t.surveyIntro}
                            </p>
                        </div>

                        <div className="bg-white rounded-3xl p-6 shadow-2xl">
                            {step === 1 && (
                                <div className="animate-fade-in">
                                    <h3 className="text-xl font-bold text-gray-800 mb-4">
                                        {t.strengths}
                                    </h3>
                                    <div className="grid grid-cols-2 gap-3 mb-6">
                                        {subjects.map(sub => (
                                            <button
                                                key={sub}
                                                onClick={() => toggleSubject('strengths', sub)}
                                                className={`py-3 rounded-xl font-medium transition-all ${
                                                    formData.strengths.includes(sub)
                                                        ? 'bg-green-500 text-white shadow-lg scale-105'
                                                        : 'bg-gray-100 text-gray-700'
                                                }`}
                                            >
                                                {t[sub]}
                                            </button>
                                        ))}
                                    </div>
                                    <button
                                        onClick={() => setStep(2)}
                                        disabled={formData.strengths.length === 0}
                                        className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-xl font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed"
                                    >
                                        Next â†’
                                    </button>
                                </div>
                            )}

                            {step === 2 && (
                                <div className="animate-fade-in">
                                    <h3 className="text-xl font-bold text-gray-800 mb-4">
                                        {t.weaknesses}
                                    </h3>
                                    <div className="grid grid-cols-2 gap-3 mb-6">
                                        {subjects.map(sub => (
                                            <button
                                                key={sub}
                                                onClick={() => toggleSubject('weaknesses', sub)}
                                                className={`py-3 rounded-xl font-medium transition-all ${
                                                    formData.weaknesses.includes(sub)
                                                        ? 'bg-red-500 text-white shadow-lg scale-105'
                                                        : 'bg-gray-100 text-gray-700'
                                                }`}
                                            >
                                                {t[sub]}
                                            </button>
                                        ))}
                                    </div>
                                    <div className="flex gap-3">
                                        <button
                                            onClick={() => setStep(1)}
                                            className="flex-1 bg-gray-300 text-gray-700 py-4 rounded-xl font-bold"
                                        >
                                            â† Back
                                        </button>
                                        <button
                                            onClick={() => setStep(3)}
                                            disabled={formData.weaknesses.length === 0}
                                            className="flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-xl font-bold disabled:opacity-50"
                                        >
                                            Next â†’
                                        </button>
                                    </div>
                                </div>
                            )}

                            {step === 3 && (
                                <div className="animate-fade-in">
                                    <h3 className="text-xl font-bold text-gray-800 mb-4">
                                        {t.targetGrade}
                                    </h3>
                                    <div className="grid grid-cols-5 gap-3 mb-6">
                                        {['A', 'B', 'C', 'D', 'E'].map(grade => (
                                            <button
                                                key={grade}
                                                onClick={() => setFormData({...formData, targetGrade: grade})}
                                                className={`py-4 rounded-xl font-bold text-xl transition-all ${
                                                    formData.targetGrade === grade
                                                        ? 'bg-blue-500 text-white shadow-lg scale-110'
                                                        : 'bg-gray-100 text-gray-700'
                                                }`}
                                            >
                                                {grade}
                                            </button>
                                        ))}
                                    </div>
                                    <div className="flex gap-3">
                                        <button
                                            onClick={() => setStep(2)}
                                            className="flex-1 bg-gray-300 text-gray-700 py-4 rounded-xl font-bold"
                                        >
                                            â† Back
                                        </button>
                                        <button
                                            onClick={() => setStep(4)}
                                            disabled={!formData.targetGrade}
                                            className="flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-xl font-bold disabled:opacity-50"
                                        >
                                            Next â†’
                                        </button>
                                    </div>
                                </div>
                            )}

                            {step === 4 && (
                                <div className="animate-fade-in">
                                    <h3 className="text-xl font-bold text-gray-800 mb-4">
                                        {t.monthsLeft}
                                    </h3>
                                    <div className="grid grid-cols-3 gap-3 mb-6">
                                        {['1', '2', '3', '4', '5', '6'].map(month => (
                                            <button
                                                key={month}
                                                onClick={() => setFormData({...formData, monthsLeft: month})}
                                                className={`py-4 rounded-xl font-bold text-lg transition-all ${
                                                    formData.monthsLeft === month
                                                        ? 'bg-orange-500 text-white shadow-lg scale-110'
                                                        : 'bg-gray-100 text-gray-700'
                                                }`}
                                            >
                                                {month}
                                            </button>
                                        ))}
                                    </div>
                                    <div className="flex gap-3">
                                        <button
                                            onClick={() => setStep(3)}
                                            className="flex-1 bg-gray-300 text-gray-700 py-4 rounded-xl font-bold"
                                        >
                                            â† Back
                                        </button>
                                        <button
                                            onClick={handleSubmit}
                                            disabled={!formData.monthsLeft}
                                            className="flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-4 rounded-xl font-bold disabled:opacity-50 animate-pulse"
                                        >
                                            {t.generateRoadmap} âœ¨
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        // Roadmap Page Component
        function RoadmapPage({ lang, userData, studyHours, onContinue, t }) {
            const phases = [
                { 
                    month: `${t.month || 'Month'} 1-2`, 
                    title: lang === 'en' ? 'Fix Math foundations' : 'á‡á½áŸá‡á»á›á‚áŸ’ášá¹áŸ‡á‚áá·ááœá·á‘áŸ’á™á¶',
                    icon: 'ğŸ“'
                },
                { 
                    month: `${t.month || 'Month'} 3`, 
                    title: lang === 'en' ? 'Biology deep dive' : 'áŸáŸŠá¸á‡á˜áŸ’ášáŸ…á‡á¸áœáœá·á‘áŸ’á™á¶',
                    icon: 'ğŸ§¬'
                },
                { 
                    month: `${t.month || 'Month'} 4`, 
                    title: lang === 'en' ? 'Mixed practice all subjects' : 'á¢á“á»áœááŸ’áá›á¶á™á˜á»ááœá·á‡áŸ’á‡á¶á‘á¶áŸ†á„á¢áŸáŸ‹',
                    icon: 'ğŸ“š'
                },
                { 
                    month: `${t.month || 'Month'} 5`, 
                    title: lang === 'en' ? 'Exam simulation & weak areas' : 'á”áŸ’ášá¡á„á–á·áŸáŸ„á’á“áŸ & ááŸ†á”á“áŸ‹ááŸ’áŸáŸ„á™',
                    icon: 'ğŸ¯'
                }
            ];

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-600 to-purple-700 p-6 flex flex-col">
                    <div className="animate-slide-up">
                        <h1 className="bangers text-4xl text-white text-center mb-6 animate-bounce">
                            {t.yourRoadmap} ğŸ“
                        </h1>

                        <div className="bg-white rounded-3xl p-6 shadow-2xl mb-6">
                            <div className="text-center mb-6">
                                <div className="inline-block bg-gradient-to-r from-green-400 to-emerald-500 text-white px-6 py-3 rounded-full font-bold text-lg animate-pulse">
                                    {t.targetGrade || 'Target Grade'}: {userData.targetGrade} | {userData.monthsLeft} {lang === 'en' ? 'months left' : 'ááŸ‚á“áŸ…áŸá›áŸ‹'}
                                </div>
                            </div>

                            <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-5 mb-6">
                                <h3 className="font-bold text-gray-800 mb-3 text-lg">
                                    â° {t.recommendedTime}
                                </h3>
                                <div className="text-center">
                                    <div className="text-5xl font-black gradient-text mb-2">
                                        {studyHours}
                                    </div>
                                    <div className="text-gray-600 font-medium">
                                        {t.hoursPerDay}
                                    </div>
                                    <div className="text-sm text-gray-500 mt-2">
                                        {t.basedOn}
                                    </div>
                                </div>
                            </div>

                            <div className="mb-4">
                                <h3 className="font-bold text-gray-800 mb-4 text-lg">
                                    ğŸ—ºï¸ {t.roadmapPhases}
                                </h3>
                                <div className="space-y-3">
                                    {phases.map((phase, idx) => (
                                        <div 
                                            key={idx} 
                                            className="bg-white border-2 border-purple-200 rounded-xl p-4 flex items-center gap-3 animate-slide-up"
                                            style={{animationDelay: `${idx * 0.1}s`}}
                                        >
                                            <div className="text-3xl">{phase.icon}</div>
                                            <div>
                                                <div className="font-bold text-purple-600">{phase.month}</div>
                                                <div className="text-gray-700">{phase.title}</div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>

                        <button
                            onClick={onContinue}
                            className="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-5 rounded-2xl font-bold text-xl shadow-xl animate-pulse"
                        >
                            {t.studyNow} ğŸš€
                        </button>
                    </div>
                </div>
            );
        }

        // Home Page Component
        function HomePage({ lang, setLang, xp, level, streak, daysLeft, tasksCompleted, completeTask, onViewRoadmap, t }) {
            const allTasksComplete = Object.values(tasksCompleted).every(v => v);
            const motivationQuotes = {
                en: [
                    "Success is the sum of small efforts repeated day in and day out.",
                    "The expert in anything was once a beginner.",
                    "Study hard now, celebrate later!",
                    "Your future self will thank you for today's effort."
                ],
                km: [
                    "á—á¶á–á‡áŸ„á‚á‡áŸá™á‚áºá‡á¶á•á›á”á¼á€á“áŸƒá€á¶ášáá·áááŸ†áá¼á…áŸ—áŠáŸ‚á›á’áŸ’áœá¾á˜áŸ’áá„á á¾á™á˜áŸ’áá„á‘áŸ€ááŸ”",
                    "á¢áŸ’á“á€á‡áŸ†á“á¶á‰á€áŸ’á“á»á„á¢áŸ’áœá¸á˜á½á™á’áŸ’á›á¶á”áŸ‹á‡á¶á¢áŸ’á“á€á…á¶á”áŸ‹á•áŸ’áá¾á˜áŸ”",
                    "á”áŸ’ášá¹á„áŸá·á€áŸ’áŸá¶á¥á¡á¼áœ á¢á”á¢ášá“áŸ…á–áŸá›á€áŸ’ášáŸ„á™!",
                    "ááŸ’á›á½á“á¯á„á¢á“á¶á‚áášá”áŸáŸ‹á¢áŸ’á“á€á“á¹á„ááŸ’á›áŸ‚á„á¢áŸ†áášá‚á»áá…áŸ†á–áŸ„áŸ‡á€á¶ášáá·áááŸ†ááŸ’á„áŸƒá“áŸáŸ‡áŸ”"
                ]
            };
            const randomQuote = motivationQuotes[lang][Math.floor(Math.random() * motivationQuotes[lang].length)];

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-24">
                    <div className="bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-b-3xl shadow-xl">
                        <div className="flex justify-between items-center mb-6">
                            <h1 className="bangers text-3xl text-white">BAC II HERO</h1>
                            <button 
                                onClick={() => setLang(lang === 'en' ? 'km' : 'en')}
                                className="bg-white/20 text-white px-3 py-1 rounded-full text-sm"
                            >
                                {lang === 'en' ? 'ğŸ‡°ğŸ‡­ KM' : 'ğŸ‡¬ğŸ‡§ EN'}
                            </button>
                        </div>

                        <div className="grid grid-cols-3 gap-3 mb-4">
                            <div className="bg-white/20 backdrop-blur-lg rounded-xl p-3 text-center">
                                <div className="text-yellow-300 text-2xl font-black">{daysLeft}</div>
                                <div className="text-white/90 text-xs">{t.daysLeft}</div>
                            </div>
                            <div className="bg-white/20 backdrop-blur-lg rounded-xl p-3 text-center">
                                <div className="text-yellow-300 text-2xl font-black">{streak} ğŸ”¥</div>
                                <div className="text-white/90 text-xs">{t.currentStreak}</div>
                            </div>
                            <div className="bg-white/20 backdrop-blur-lg rounded-xl p-3 text-center">
                                <div className="text-yellow-300 text-2xl font-black">Lv {level}</div>
                                <div className="text-white/90 text-xs">{xp} XP</div>
                            </div>
                        </div>

                        <div className="bg-white/10 backdrop-blur-lg rounded-xl p-4">
                            <div className="text-white/90 text-xs mb-2">{t.motivationQuote}</div>
                            <div className="text-white font-medium italic">"{randomQuote}"</div>
                        </div>
                    </div>

                    <div className="p-6">
                        <div className="bg-white rounded-2xl shadow-lg p-5 mb-4">
                            <h2 className="font-bold text-gray-800 mb-3 flex items-center gap-2">
                                <span className="text-2xl">ğŸ“‹</span> {t.dailyPlan}
                            </h2>
                            {!allTasksComplete ? (
                                <div className="space-y-3">
                                    <p className="text-sm text-gray-600 mb-3">{t.todaysPlan}</p>
                                    <TaskItem 
                                        completed={tasksCompleted.lesson}
                                        icon="ğŸ“–"
                                        text={`${t.completeLesson}: Basic Limits (20 min)`}
                                        onClick={() => completeTask('lesson')}
                                    />
                                    <TaskItem 
                                        completed={tasksCompleted.practice}
                                        icon="âœï¸"
                                        text={`${t.practice} (15 min)`}
                                        onClick={() => completeTask('practice')}
                                    />
                                    <TaskItem 
                                        completed={tasksCompleted.flashcards}
                                        icon="ğŸ´"
                                        text={`${t.reviewCards} (10 min)`}
                                        onClick={() => completeTask('flashcards')}
                                    />
                                    <TaskItem 
                                        completed={tasksCompleted.challenge}
                                        icon="ğŸ¯"
                                        text={t.dailyChallengeTask}
                                        onClick={() => completeTask('challenge')}
                                    />
                                </div>
                            ) : (
                                <div className="text-center py-6">
                                    <div className="text-6xl mb-3 animate-bounce">ğŸ‰</div>
                                    <div className="font-bold text-green-600 text-lg">{t.completedMsg}</div>
                                </div>
                            )}
                        </div>

                        <div className="grid grid-cols-2 gap-3">
                            <button
                                onClick={onViewRoadmap}
                                className="bg-gradient-to-br from-blue-500 to-indigo-600 text-white p-4 rounded-xl font-bold shadow-lg flex flex-col items-center gap-2"
                            >
                                <span className="text-3xl">ğŸ—ºï¸</span>
                                <span className="text-sm">{t.viewRoadmap}</span>
                            </button>
                            <button
                                onClick={() => {}}
                                className="bg-gradient-to-br from-green-500 to-emerald-600 text-white p-4 rounded-xl font-bold shadow-lg flex flex-col items-center gap-2"
                            >
                                <span className="text-3xl">ğŸ“š</span>
                                <span className="text-sm">{t.studyNow}</span>
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        function TaskItem({ completed, icon, text, onClick }) {
            return (
                <div
                    onClick={!completed ? onClick : null}
                    className={`flex items-center gap-3 p-3 rounded-xl border-2 transition-all cursor-pointer ${
                        completed 
                            ? 'bg-green-50 border-green-300' 
                            : 'bg-gray-50 border-gray-200 hover:border-purple-300'
                    }`}
                >
                    <div className="text-2xl">{completed ? 'âœ…' : icon}</div>
                    <div className={`flex-1 font-medium ${completed ? 'text-green-700 line-through' : 'text-gray-700'}`}>
                        {text}
                    </div>
                </div>
            );
        }

        // Lessons Page Component
        function LessonsPage({ lang, setCurrentLesson, setCurrentPage, t }) {
            const lessons = [
                { id: 'math-limits', category: 'math', title: lessonsData.math.limits.title[lang], importance: '85%', icon: 'ğŸ“' },
                { id: 'math-probability', category: 'math', title: lessonsData.math.probability.title[lang], importance: '40%', icon: 'ğŸ²' },
                { id: 'biology-body', category: 'biology', title: lessonsData.biology.body.title[lang], importance: '65%', icon: 'ğŸ«€' },
                { id: 'biology-brain', category: 'biology', title: lessonsData.biology.brain.title[lang], importance: '70%', icon: 'ğŸ§ ' }
            ];

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-24">
                    <div className="bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-b-3xl shadow-xl mb-6">
                        <h1 className="bangers text-3xl text-white text-center">{t.lessons} ğŸ“š</h1>
                    </div>

                    <div className="p-6 space-y-6">
                        <div>
                            <h2 className="font-bold text-xl text-gray-800 mb-3 flex items-center gap-2">
                                <span className="text-2xl">ğŸ“</span> {t.math}
                            </h2>
                            <div className="space-y-3">
                                {lessons.filter(l => l.category === 'math').map(lesson => (
                                    <LessonCard 
                                        key={lesson.id}
                                        lesson={lesson}
                                        onClick={() => {
                                            setCurrentLesson(lesson.id);
                                            setCurrentPage('lesson-detail');
                                        }}
                                        t={t}
                                    />
                                ))}
                            </div>
                        </div>

                        <div>
                            <h2 className="font-bold text-xl text-gray-800 mb-3 flex items-center gap-2">
                                <span className="text-2xl">ğŸ§¬</span> {t.biology}
                            </h2>
                            <div className="space-y-3">
                                {lessons.filter(l => l.category === 'biology').map(lesson => (
                                    <LessonCard 
                                        key={lesson.id}
                                        lesson={lesson}
                                        onClick={() => {
                                            setCurrentLesson(lesson.id);
                                            setCurrentPage('lesson-detail');
                                        }}
                                        t={t}
                                    />
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function LessonCard({ lesson, onClick, t }) {
            return (
                <div
                    onClick={onClick}
                    className="bg-white rounded-xl p-4 shadow-md border-2 border-gray-100 hover:border-purple-300 cursor-pointer transition-all hover:scale-102"
                >
                    <div className="flex items-center gap-4">
                        <div className="text-4xl">{lesson.icon}</div>
                        <div className="flex-1">
                            <h3 className="font-bold text-gray-800">{lesson.title}</h3>
                            <div className="text-sm text-orange-600 font-medium">
                                {t.importanceNote}: {lesson.importance}
                            </div>
                        </div>
                        <div className="text-purple-500 text-2xl">â†’</div>
                    </div>
                </div>
            );
        }

        // Lesson Detail Page Component
        function LessonDetailPage({ lang, lesson, onBack, onComplete, t }) {
            const [studyDepth, setStudyDepth] = useState(null);
            const [showContent, setShowContent] = useState(false);

            const getLessonData = () => {
                const parts = lesson.split('-');
                const category = parts[0];
                const topic = parts[1];
                
                if (category === 'math') {
                    return lessonsData.math[topic === 'limits' ? 'limits' : 'probability'];
                } else {
                    return lessonsData.biology[topic === 'body' ? 'body' : 'brain'];
                }
            };

            const lessonData = getLessonData();

            if (!studyDepth) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 p-6">
                        <button onClick={onBack} className="mb-6 text-purple-600 font-medium flex items-center gap-2">
                            â† {t.backToLessons}
                        </button>
                        <div className="bg-white rounded-2xl p-6 shadow-xl">
                            <h2 className="text-2xl font-bold text-gray-800 mb-6 text-center">
                                {t.chooseDepth}
                            </h2>
                            <div className="space-y-4">
                                <button
                                    onClick={() => { setStudyDepth('quick'); setShowContent(true); }}
                                    className="w-full bg-gradient-to-r from-green-400 to-emerald-500 text-white p-4 rounded-xl font-bold text-left flex items-center justify-between"
                                >
                                    <span>ğŸƒ {t.quickReview}</span>
                                </button>
                                <button
                                    onClick={() => { setStudyDepth('standard'); setShowContent(true); }}
                                    className="w-full bg-gradient-to-r from-blue-400 to-indigo-500 text-white p-4 rounded-xl font-bold text-left flex items-center justify-between"
                                >
                                    <span>ğŸ“š {t.standardStudy}</span>
                                </button>
                                <button
                                    onClick={() => { setStudyDepth('deep'); setShowContent(true); }}
                                    className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white p-4 rounded-xl font-bold text-left flex items-center justify-between"
                                >
                                    <span>ğŸ¯ {t.deepDive}</span>
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-24">
                    <div className="bg-gradient-to-r from-purple-600 to-indigo-700 p-6 sticky top-0 z-10 shadow-xl">
                        <button onClick={onBack} className="text-white mb-3 flex items-center gap-2">
                            â† {t.backToLessons}
                        </button>
                        <h1 className="text-2xl font-bold text-white">{lessonData.title[lang]}</h1>
                        <div className="text-yellow-300 text-sm mt-2">
                            {t.importanceNote}: {lessonData.importance} â€¢ {studyDepth === 'quick' ? '10 min' : studyDepth === 'standard' ? '30 min' : '60 min'}
                        </div>
                    </div>

                    <div className="p-6 space-y-4 animate-slide-up">
                        <div className="bg-white rounded-2xl p-5 shadow-lg">
                            <h3 className="font-bold text-gray-800 mb-3 text-lg">ğŸ“– Lesson Content</h3>
                            <p className="text-gray-700 leading-relaxed">{lessonData.content[lang]}</p>
                        </div>

                        <div className="bg-blue-50 border-2 border-blue-300 rounded-2xl p-5 shadow-lg">
                            <h3 className="font-bold text-blue-800 mb-2 flex items-center gap-2">
                                <span className="text-xl">ğŸ“</span> {t.summary}
                            </h3>
                            <p className="text-blue-900">{lessonData.summary[lang]}</p>
                        </div>

                        <div className="bg-yellow-50 border-2 border-yellow-300 rounded-2xl p-5 shadow-lg">
                            <h3 className="font-bold text-yellow-800 mb-2 flex items-center gap-2">
                                <span className="text-xl">ğŸ¯</span> {t.funFact}
                            </h3>
                            <p className="text-yellow-900">{lessonData.funFact[lang]}</p>
                        </div>

                        <div className="bg-purple-50 border-2 border-purple-300 rounded-2xl p-5 shadow-lg">
                            <h3 className="font-bold text-purple-800 mb-2 flex items-center gap-2">
                                <span className="text-xl">ğŸ’¡</span> {t.surpriseTip}
                            </h3>
                            <p className="text-purple-900">{lessonData.tip[lang]}</p>
                        </div>

                        {lessonData.didYouKnow && (
                            <div className="bg-green-50 border-2 border-green-300 rounded-2xl p-5 shadow-lg">
                                <h3 className="font-bold text-green-800 mb-2 flex items-center gap-2">
                                    <span className="text-xl">ğŸ§ </span> {t.didYouKnow}
                                </h3>
                                <p className="text-green-900">{lessonData.didYouKnow[lang]}</p>
                            </div>
                        )}

                        <button
                            onClick={onComplete}
                            className="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-5 rounded-2xl font-bold text-lg shadow-xl"
                        >
                            âœ… {t.quickChallenge} - {t.earnXP}
                        </button>
                    </div>
                </div>
            );
        }

        // Donate Page Component
        function DonatePage({ lang, t }) {
            const [donated, setDonated] = useState(false);

            const topDonors = [
                { name: 'UNICEF Cambodia', amount: '$50,000', type: 'NGO' },
                { name: 'Sokha Tep', amount: '$5,000', type: 'Individual' },
                { name: 'ABA Bank', amount: '$25,000', type: 'Company' },
                { name: 'Ministry of Education', amount: '$100,000', type: 'Government' },
                { name: 'Dara Chan', amount: '$2,500', type: 'Individual' }
            ];

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-24">
                    <div className="bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-b-3xl shadow-xl mb-6">
                        <h1 className="bangers text-3xl text-white text-center mb-2">{t.donateTitle} ğŸ’</h1>
                        <p className="text-white/90 text-center text-sm">{t.donateSubtitle}</p>
                    </div>

                    <div className="p-6 space-y-4">
                        {!donated ? (
                            <>
                                <button
                                    onClick={() => setDonated(true)}
                                    className="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white p-6 rounded-2xl font-bold text-lg shadow-xl flex items-center justify-between"
                                >
                                    <span>ğŸ’µ {t.moneyDonation}</span>
                                    <span className="text-3xl">â†’</span>
                                </button>
                                <button
                                    onClick={() => setDonated(true)}
                                    className="w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-6 rounded-2xl font-bold text-lg shadow-xl flex items-center justify-between"
                                >
                                    <span>ğŸ“º {t.watchAds}</span>
                                    <span className="text-3xl">â†’</span>
                                </button>
                            </>
                        ) : (
                            <div className="bg-white rounded-2xl p-8 shadow-xl text-center animate-slide-up">
                                <div className="text-6xl mb-4 animate-bounce">ğŸ‰</div>
                                <h2 className="text-2xl font-bold text-green-600 mb-2">{t.thankYou}</h2>
                                <p className="text-gray-600">Your donation will help students achieve their dreams!</p>
                            </div>
                        )}

                        <div className="bg-white rounded-2xl p-6 shadow-xl">
                            <h2 className="font-bold text-xl text-gray-800 mb-4 flex items-center gap-2">
                                <span className="text-2xl">ğŸ†</span> {t.topDonors}
                            </h2>
                            <div className="space-y-3">
                                {topDonors.map((donor, idx) => (
                                    <div key={idx} className="flex items-center gap-3 p-3 bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl">
                                        <div className="text-2xl font-black text-purple-600 w-8">#{idx + 1}</div>
                                        <div className="flex-1">
                                            <div className="font-bold text-gray-800">{donor.name}</div>
                                            <div className="text-sm text-gray-500">{donor.type}</div>
                                        </div>
                                        <div className="font-bold text-green-600">{donor.amount}</div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Chat Page Component
        function ChatPage({ lang, t }) {
            const [messages, setMessages] = useState([]);
            const [input, setInput] = useState('');

            const commonQuestions = [
                { q: lang === 'en' ? 'How do I calculate limits?' : 'áá¾á‚áá“á¶á›á¸á˜á¸áá™áŸ‰á¶á„áŠá¼á…á˜áŸ’ááŸá…?', a: lang === 'en' ? 'To calculate limits, substitute the value into the function. If you get 0/0, try factoring or L\'HÃ´pital\'s rule!' : 'áŠá¾á˜áŸ’á”á¸á‚áá“á¶á›á¸á˜á¸á á‡áŸ†á“á½áŸáá˜áŸ’á›áŸƒá‘áŸ…á€áŸ’á“á»á„á¢á“á»á‚á˜á“áŸáŸ” á”áŸ’ášáŸá·á“á”á¾á¢áŸ’á“á€á‘á‘á½á›á”á¶á“ 0/0 áŸá¼á˜á–áŸ’á™á¶á™á¶á˜áŠá¶á€áŸ‹á€ááŸ’áá¶ á¬á…áŸ’á”á¶á”áŸ‹ L\'HÃ´pital!' },
                { q: lang === 'en' ? 'What\'s the brain structure?' : 'áá¾ášá…á“á¶áŸá˜áŸ’á–áŸá“áŸ’á’áá½ášá€áŸ’á”á¶á›á‡á¶á¢áŸ’áœá¸?', a: lang === 'en' ? 'The brain has 3 main parts: Cerebrum (thinking), Cerebellum (balance), and Brain stem (vital functions).' : 'áá½ášá€áŸ’á”á¶á›á˜á¶á“ 3 á•áŸ’á“áŸ‚á€áŸáŸ†áá¶á“áŸ‹: áŸáŸášáŸá”áŸ’ášá»á˜ (á‚áŸ†á“á·á), áŸáŸášáŸá”áŸ‚á› (áá»á›áŸ’á™á—á¶á–), á“á·á„áŠá¾á˜áá½ášá€áŸ’á”á¶á› (á˜á»áá„á¶ášáŸáŸ†áá¶á“áŸ‹)áŸ”' },
                { q: lang === 'en' ? 'How to improve my grade?' : 'áá¾á’áŸ’áœá¾á™áŸ‰á¶á„áá¶áŠá¾á˜áŸ’á”á¸á€áŸ‚á›á˜áŸ’á¢á–á·á“áŸ’á‘á»?', a: lang === 'en' ? 'Follow your daily plan, practice weak areas, and review with flashcards. Consistency is key!' : 'á¢á“á»áœááŸ’ááá¶á˜á•áŸ‚á“á€á¶ášá”áŸ’ášá…á¶áŸ†ááŸ’á„áŸƒášá”áŸáŸ‹á¢áŸ’á“á€ á¢á“á»áœááŸ’áááŸ†á”á“áŸ‹ááŸ’áŸáŸ„á™ á“á·á„á–á·á“á·ááŸ’á™á‡á¶á˜á½á™á€á¶áá…á„á…á¶áŸ†áŸ” á—á¶á–á‡á¶á”áŸ‹á›á¶á”áŸ‹á‚áºá‡á¶áŸáŸ„!' }
            ];

            const handleSend = () => {
                if (!input.trim()) return;
                
                setMessages([...messages, { type: 'user', text: input }]);
                
                setTimeout(() => {
                    setMessages(prev => [...prev, { 
                        type: 'bot', 
                        text: t.noInternet 
                    }]);
                }, 500);
                
                setInput('');
            };

            const handleQuestionClick = (q, a) => {
                setMessages([
                    ...messages, 
                    { type: 'user', text: q },
                    { type: 'bot', text: a }
                ]);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-32">
                    <div className="bg-gradient-to-r from-purple-600 to-indigo-700 p-6 rounded-b-3xl shadow-xl mb-6">
                        <h1 className="bangers text-3xl text-white text-center">{t.aiCoach} ğŸ¤–</h1>
                    </div>

                    {messages.length === 0 ? (
                        <div className="p-6">
                            <div className="bg-white rounded-2xl p-6 shadow-lg mb-4">
                                <h3 className="font-bold text-gray-800 mb-4">{t.commonQuestions}</h3>
                                <div className="space-y-3">
                                    {commonQuestions.map((item, idx) => (
                                        <button
                                            key={idx}
                                            onClick={() => handleQuestionClick(item.q, item.a)}
                                            className="w-full text-left p-4 bg-purple-50 hover:bg-purple-100 rounded-xl border-2 border-purple-200 transition-all"
                                        >
                                            <div className="font-medium text-purple-800">{item.q}</div>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    ) : (
                        <div className="p-6 space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto">
                            {messages.map((msg, idx) => (
                                <div key={idx} className={`flex ${msg.type === 'user' ? 'justify-end' : 'justify-start'}`}>
                                    <div className={`max-w-[80%] p-4 rounded-2xl ${
                                        msg.type === 'user' 
                                            ? 'bg-purple-600 text-white' 
                                            : 'bg-white text-gray-800 shadow-md'
                                    }`}>
                                        {msg.text}
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}

                    <div className="fixed bottom-20 left-0 right-0 bg-white border-t-2 border-gray-200 p-4">
                        <div className="max-w-[430px] mx-auto flex gap-3">
                            <input
                                type="text"
                                value={input}
                                onChange={(e) => setInput(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && handleSend()}
                                placeholder={t.askQuestion}
                                className="flex-1 px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500"
                            />
                            <button
                                onClick={handleSend}
                                className="bg-purple-600 text-white px-6 py-3 rounded-xl font-bold"
                            >
                                {t.send}
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        // Tab Bar Component
        function TabBar({ currentPage, setCurrentPage, t }) {
            const tabs = [
                { id: 'home', icon: 'ğŸ ', label: t.home },
                { id: 'lessons', icon: 'ğŸ“š', label: t.lessons },
                { id: 'donate', icon: 'ğŸ’', label: t.donate },
                { id: 'chat', icon: 'ğŸ’¬', label: t.chat }
            ];

            return (
                <div className="tab-bar">
                    <div className="flex justify-around py-3">
                        {tabs.map(tab => (
                            <button
                                key={tab.id}
                                onClick={() => setCurrentPage(tab.id)}
                                className={`flex flex-col items-center gap-1 px-4 py-2 rounded-xl transition-all ${
                                    currentPage === tab.id 
                                        ? 'bg-purple-100 text-purple-600 scale-110' 
                                        : 'text-gray-500'
                                }`}
                            >
                                <span className="text-2xl">{tab.icon}</span>
                                <span className="text-xs font-medium">{tab.label}</span>
                            </button>
                        ))}
                    </div>
                </div>
            );
        }

        // Render App
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
